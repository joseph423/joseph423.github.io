(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7657],{79241:function(e,t,n){"use strict";n.d(t,{t8:function(){return h},jD:function(){return d},QZ:function(){return y},IY:function(){return c},Ly:function(){return p},oW:function(){return f},oC:function(){return e9},Ql:function(){return to},FD:function(){return ti},X6:function(){return th},Z_:function(){return eO},yF:function(){return eJ},OL:function(){return ex},q7:function(){return F},n3:function(){return eq},Ki:function(){return eu},wQ:function(){return T},Qj:function(){return z},ZB:function(){return eg},Eg:function(){return Z},lM:function(){return eP},OQ:function(){return eN},oI:function(){return en},Zp:function(){return B},t_:function(){return ew},JU:function(){return eZ},WD:function(){return Y},xx:function(){return ek},wv:function(){return eI},S2:function(){return eb},W0:function(){return j},dW:function(){return eW},Rf:function(){return ey},RX:function(){return R},f5:function(){return C},lp:function(){return er},OW:function(){return eC},Hm:function(){return e_},$i:function(){return ec},so:function(){return e2},k5:function(){return N},Ky:function(){return k},J3:function(){return L},RY:function(){return eA},s$:function(){return eM},Q5:function(){return ef},N5:function(){return e$},Vt:function(){return O},kE:function(){return ei},J$:function(){return eo},nb:function(){return ep},PS:function(){return ee},hO:function(){return e3},m:function(){return ea},oj:function(){return es},_2:function(){return el},VV:function(){return eU},be:function(){return e8},B1:function(){return e5},nu:function(){return em}});var r,o,i,u,l,a,s,d,c,f,h,y,p,g,x=n(39172),m=n(68244),v=n(61068),w=n(69482),b=n(81784),E=e=>()=>e;function M(e,{sourceEvent:t,subject:n,target:r,identifier:o,active:i,x:u,y:l,dx:a,dy:s,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:o,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:u,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:a,enumerable:!0,configurable:!0},dy:{value:s,enumerable:!0,configurable:!0},_:{value:d}})}function $(e){return!e.ctrlKey&&!e.button}function I(){return this.parentNode}function S(e,t){return null==t?{x:e.x,y:e.y}:t}function P(){return navigator.maxTouchPoints||"ontouchstart"in this}M.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};var H=n(84101);let z={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${"source"===e?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},N=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],T=["Enter"," ","Escape"];(r=d||(d={})).Strict="strict",r.Loose="loose",(o=c||(c={})).Free="free",o.Vertical="vertical",o.Horizontal="horizontal",(i=f||(f={})).Partial="partial",i.Full="full";let k={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};(u=h||(h={})).Bezier="default",u.Straight="straight",u.Step="step",u.SmoothStep="smoothstep",u.SimpleBezier="simplebezier",(l=y||(y={})).Arrow="arrow",l.ArrowClosed="arrowclosed",(a=p||(p={})).Left="left",a.Top="top",a.Right="right",a.Bottom="bottom";let A={[p.Left]:p.Right,[p.Right]:p.Left,[p.Top]:p.Bottom,[p.Bottom]:p.Top};function B(e){return null===e?null:e?"valid":"invalid"}let L=e=>"id"in e&&"source"in e&&"target"in e,O=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),_=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),V=(e,t=[0,0])=>{let{width:n,height:r}=ey(e),o=e.origin??t,i=n*o[0],u=r*o[1];return{x:e.position.x-i,y:e.position.y-u}},R=(e,t={nodeOrigin:[0,0]})=>0===e.length?{x:0,y:0,width:0,height:0}:J(e.reduce((e,n)=>{let r="string"==typeof n,o=t.nodeLookup||r?void 0:n;return t.nodeLookup&&(o=r?t.nodeLookup.get(n):_(n)?n:t.nodeLookup.get(n.id)),G(e,o?et(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0})},{x:1/0,y:1/0,x2:-1/0,y2:-1/0})),j=(e,t={})=>{if(0===e.size)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(e=>{if(void 0===t.filter||t.filter(e)){let t=et(e);n=G(n,t)}}),J(n)},C=(e,t,[n,r,o]=[0,0,1],i=!1,u=!1)=>{let l={...ea(t,[n,r,o]),width:t.width/o,height:t.height/o},a=[];for(let t of e.values()){let{measured:e,selectable:n=!0,hidden:r=!1}=t;if(u&&!n||r)continue;let o=e.width??t.width??t.initialWidth??null,s=e.height??t.height??t.initialHeight??null,d=er(l,ee(t)),c=(o??0)*(s??0),f=i&&d>0;(!t.internals.handleBounds||f||d>=c||t.dragging)&&a.push(t)}return a},D=(e,t)=>{let n=new Set;return e.forEach(e=>{n.add(e.id)}),t.filter(e=>n.has(e.source)||n.has(e.target))};async function Z({nodes:e,width:t,height:n,panZoom:r,minZoom:o,maxZoom:i},u){if(0===e.size)return Promise.resolve(!0);let l=ec(j(function(e,t){let n=new Map,r=t?.nodes?new Set(t.nodes.map(e=>e.id)):null;return e.forEach(e=>{e.measured.width&&e.measured.height&&(t?.includeHiddenNodes||!e.hidden)&&(!r||r.has(e.id))&&n.set(e.id,e)}),n}(e,u)),t,n,u?.minZoom??o,u?.maxZoom??i,u?.padding??.1);return await r.setViewport(l,{duration:u?.duration}),Promise.resolve(!0)}function F({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:o,onError:i}){let u=n.get(e),l=u.parentId?n.get(u.parentId):void 0,{x:a,y:s}=l?l.internals.positionAbsolute:{x:0,y:0},d=u.origin??r,c=o;if("parent"!==u.extent||u.expandParent)l&&eh(u.extent)&&(c=[[u.extent[0][0]+a,u.extent[0][1]+s],[u.extent[1][0]+a,u.extent[1][1]+s]]);else if(l){let e=l.measured.width,t=l.measured.height;e&&t&&(c=[[a,s],[a+e,s+t]])}else i?.("005",z.error005());let f=eh(c)?W(t,c,u.measured):t;return(void 0===u.measured.width||void 0===u.measured.height)&&i?.("015",z.error015()),{position:{x:f.x-a+(u.measured.width??0)*d[0],y:f.y-s+(u.measured.height??0)*d[1]},positionAbsolute:f}}async function Y({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:o}){let i=new Set(e.map(e=>e.id)),u=[];for(let e of n){if(!1===e.deletable)continue;let t=i.has(e.id),n=!t&&e.parentId&&u.find(t=>t.id===e.parentId);(t||n)&&u.push(e)}let l=new Set(t.map(e=>e.id)),a=r.filter(e=>!1!==e.deletable),s=D(u,a);for(let e of a)l.has(e.id)&&!s.find(t=>t.id===e.id)&&s.push(e);if(!o)return{edges:s,nodes:u};let d=await o({nodes:u,edges:s});return"boolean"==typeof d?d?{edges:s,nodes:u}:{edges:[],nodes:[]}:d}let X=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),W=(e={x:0,y:0},t,n)=>({x:X(e.x,t[0][0],t[1][0]-(n?.width??0)),y:X(e.y,t[0][1],t[1][1]-(n?.height??0))});function q(e,t,n){let{width:r,height:o}=ey(n),{x:i,y:u}=n.internals.positionAbsolute;return W(e,[[i,u],[i+r,u+o]],t)}let K=(e,t,n)=>e<t?X(Math.abs(e-t),1,t)/t:e>n?-X(Math.abs(e-n),1,t)/t:0,Q=(e,t,n=15,r=40)=>[K(e.x,r,t.width-r)*n,K(e.y,r,t.height-r)*n],G=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),U=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),J=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),ee=(e,t=[0,0])=>{let{x:n,y:r}=_(e)?e.internals.positionAbsolute:V(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},et=(e,t=[0,0])=>{let{x:n,y:r}=_(e)?e.internals.positionAbsolute:V(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},en=(e,t)=>J(G(U(e),U(t))),er=(e,t)=>Math.ceil(Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x))*Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y))),eo=e=>ei(e.width)&&ei(e.height)&&ei(e.x)&&ei(e.y),ei=e=>!isNaN(e)&&isFinite(e),eu=(e,t)=>{},el=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),ea=({x:e,y:t},[n,r,o],i=!1,u=[1,1])=>{let l={x:(e-n)/o,y:(t-r)/o};return i?el(l,u):l},es=({x:e,y:t},[n,r,o])=>({x:e*o+n,y:t*o+r});function ed(e,t){if("number"==typeof e)return Math.floor((t-t/(1+e))*.5);if("string"==typeof e&&e.endsWith("px")){let t=parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if("string"==typeof e&&e.endsWith("%")){let n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}let ec=(e,t,n,r,o,i)=>{let u=function(e,t,n){if("string"==typeof e||"number"==typeof e){let r=ed(e,n),o=ed(e,t);return{top:r,right:o,bottom:r,left:o,x:2*o,y:2*r}}if("object"==typeof e){let r=ed(e.top??e.y??0,n),o=ed(e.bottom??e.y??0,n),i=ed(e.left??e.x??0,t),u=ed(e.right??e.x??0,t);return{top:r,right:u,bottom:o,left:i,x:i+u,y:r+o}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}(i,t,n),l=X(Math.min((t-u.x)/e.width,(n-u.y)/e.height),r,o),a=e.x+e.width/2,s=e.y+e.height/2,d=t/2-a*l,c=n/2-s*l,f=function(e,t,n,r,o,i){let{x:u,y:l}=es(e,[t,n,r]),{x:a,y:s}=es({x:e.x+e.width,y:e.y+e.height},[t,n,r]);return{left:Math.floor(u),top:Math.floor(l),right:Math.floor(o-a),bottom:Math.floor(i-s)}}(e,d,c,l,t,n),h={left:Math.min(f.left-u.left,0),top:Math.min(f.top-u.top,0),right:Math.min(f.right-u.right,0),bottom:Math.min(f.bottom-u.bottom,0)};return{x:d-h.left+h.right,y:c-h.top+h.bottom,zoom:l}},ef=()=>"undefined"!=typeof navigator&&navigator?.userAgent?.indexOf("Mac")>=0;function eh(e){return void 0!==e&&"parent"!==e}function ey(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function ep(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function eg(e,t={width:0,height:0},n,r,o){let i={...e},u=r.get(n);if(u){let e=u.origin||o;i.x+=u.internals.positionAbsolute.x-(t.width??0)*e[0],i.y+=u.internals.positionAbsolute.y-(t.height??0)*e[1]}return i}function ex(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function em(){let e,t;return{promise:new Promise((n,r)=>{e=n,t=r}),resolve:e,reject:t}}function ev(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:o}){let{x:i,y:u}=eI(e),l=ea({x:i-(o?.left??0),y:u-(o?.top??0)},r),{x:a,y:s}=n?el(l,t):l;return{xSnapped:a,ySnapped:s,...l}}let ew=e=>({width:e.offsetWidth,height:e.offsetHeight}),eb=e=>e?.getRootNode?.()||window?.document,eE=["INPUT","SELECT","TEXTAREA"];function eM(e){let t=e.composedPath?.()?.[0]||e.target;return t?.nodeType===1&&(eE.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey"))}let e$=e=>"clientX"in e,eI=(e,t)=>{let n=e$(e),r=n?e.clientX:e.touches?.[0].clientX,o=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:o-(t?.top??0)}},eS=(e,t,n,r,o)=>{let i=t.querySelectorAll(`.${e}`);return i&&i.length?Array.from(i).map(t=>{let i=t.getBoundingClientRect();return{id:t.getAttribute("data-handleid"),type:e,nodeId:o,position:t.getAttribute("data-handlepos"),x:(i.left-n.left)/r,y:(i.top-n.top)/r,...ew(t)}}):null};function eP({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:o,sourceControlY:i,targetControlX:u,targetControlY:l}){let a=.125*e+.375*o+.375*u+.125*n,s=.125*t+.375*i+.375*l+.125*r;return[a,s,Math.abs(a-e),Math.abs(s-t)]}function eH(e,t){return e>=0?.5*e:25*t*Math.sqrt(-e)}function ez({pos:e,x1:t,y1:n,x2:r,y2:o,c:i}){switch(e){case p.Left:return[t-eH(t-r,i),n];case p.Right:return[t+eH(r-t,i),n];case p.Top:return[t,n-eH(n-o,i)];case p.Bottom:return[t,n+eH(o-n,i)]}}function eN({sourceX:e,sourceY:t,sourcePosition:n=p.Bottom,targetX:r,targetY:o,targetPosition:i=p.Top,curvature:u=.25}){let[l,a]=ez({pos:n,x1:e,y1:t,x2:r,y2:o,c:u}),[s,d]=ez({pos:i,x1:r,y1:o,x2:e,y2:t,c:u}),[c,f,h,y]=eP({sourceX:e,sourceY:t,targetX:r,targetY:o,sourceControlX:l,sourceControlY:a,targetControlX:s,targetControlY:d});return[`M${e},${t} C${l},${a} ${s},${d} ${r},${o}`,c,f,h,y]}function eT({sourceX:e,sourceY:t,targetX:n,targetY:r}){let o=Math.abs(n-e)/2,i=Math.abs(r-t)/2;return[n<e?n+o:n-o,r<t?r+i:r-i,o,i]}function ek({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r=0,elevateOnSelect:o=!1}){if(!o)return r;let i=n||t.selected||e.selected,u=Math.max(e.internals.z||0,t.internals.z||0,1e3);return r+(i?u:0)}function eA({sourceNode:e,targetNode:t,width:n,height:r,transform:o}){let i=G(et(e),et(t));return i.x===i.x2&&(i.x2+=1),i.y===i.y2&&(i.y2+=1),er({x:-o[0]/o[2],y:-o[1]/o[2],width:n/o[2],height:r/o[2]},J(i))>0}let eB=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,eL=(e,t)=>t.some(t=>t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle)),eO=(e,t)=>{let n;return e.source&&e.target?eL(n=L(e)?{...e}:{...e,id:eB(e)},t)?t:(null===n.sourceHandle&&delete n.sourceHandle,null===n.targetHandle&&delete n.targetHandle,t.concat(n)):(eu("006",z.error006()),t)};function e_({sourceX:e,sourceY:t,targetX:n,targetY:r}){let[o,i,u,l]=eT({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,o,i,u,l]}let eV={[p.Left]:{x:-1,y:0},[p.Right]:{x:1,y:0},[p.Top]:{x:0,y:-1},[p.Bottom]:{x:0,y:1}},eR=({source:e,sourcePosition:t=p.Bottom,target:n})=>t===p.Left||t===p.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ej=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function eC({sourceX:e,sourceY:t,sourcePosition:n=p.Bottom,targetX:r,targetY:o,targetPosition:i=p.Top,borderRadius:u=5,centerX:l,centerY:a,offset:s=20}){let[d,c,f,h,y]=function({source:e,sourcePosition:t=p.Bottom,target:n,targetPosition:r=p.Top,center:o,offset:i}){let u,l;let a=eV[t],s=eV[r],d={x:e.x+a.x*i,y:e.y+a.y*i},c={x:n.x+s.x*i,y:n.y+s.y*i},f=eR({source:d,sourcePosition:t,target:c}),h=0!==f.x?"x":"y",y=f[h],g=[],x={x:0,y:0},m={x:0,y:0},[v,w,b,E]=eT({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(a[h]*s[h]==-1){u=o.x??v,l=o.y??w;let e=[{x:u,y:d.y},{x:u,y:c.y}],t=[{x:d.x,y:l},{x:c.x,y:l}];g=a[h]===y?"x"===h?e:t:"x"===h?t:e}else{let o=[{x:d.x,y:c.y}],f=[{x:c.x,y:d.y}];if(g="x"===h?a.x===y?f:o:a.y===y?o:f,t===r){let t=Math.abs(e[h]-n[h]);if(t<=i){let r=Math.min(i-1,i-t);a[h]===y?x[h]=(d[h]>e[h]?-1:1)*r:m[h]=(c[h]>n[h]?-1:1)*r}}if(t!==r){let e="x"===h?"y":"x",t=a[h]===s[e],n=d[e]>c[e],r=d[e]<c[e];(1===a[h]&&(!t&&n||t&&r)||1!==a[h]&&(!t&&r||t&&n))&&(g="x"===h?o:f)}let p={x:d.x+x.x,y:d.y+x.y},v={x:c.x+m.x,y:c.y+m.y};Math.max(Math.abs(p.x-g[0].x),Math.abs(v.x-g[0].x))>=Math.max(Math.abs(p.y-g[0].y),Math.abs(v.y-g[0].y))?(u=(p.x+v.x)/2,l=g[0].y):(u=g[0].x,l=(p.y+v.y)/2)}return[[e,{x:d.x+x.x,y:d.y+x.y},...g,{x:c.x+m.x,y:c.y+m.y},n],u,l,b,E]}({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:o},targetPosition:i,center:{x:l,y:a},offset:s});return[d.reduce((e,t,n)=>e+(n>0&&n<d.length-1?function(e,t,n,r){let o=Math.min(ej(e,t)/2,ej(t,n)/2,r),{x:i,y:u}=t;if(e.x===i&&i===n.x||e.y===u&&u===n.y)return`L${i} ${u}`;if(e.y===u){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${i+o*t},${u}Q ${i},${u} ${i},${u+o*r}`}let l=e.x<n.x?1:-1,a=e.y<n.y?-1:1;return`L ${i},${u+o*a}Q ${i},${u} ${i+o*l},${u}`}(d[n-1],t,d[n+1],u):`${0===n?"M":"L"}${t.x} ${t.y}`),""),c,f,h,y]}function eD(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function eZ(e){let{sourceNode:t,targetNode:n}=e;if(!eD(t)||!eD(n))return null;let r=t.internals.handleBounds||eF(t.handles),o=n.internals.handleBounds||eF(n.handles),i=eX(r?.source??[],e.sourceHandle),u=eX(e.connectionMode===d.Strict?o?.target??[]:(o?.target??[]).concat(o?.source??[]),e.targetHandle);if(!i||!u)return e.onError?.("008",z.error008(i?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;let l=i?.position||p.Bottom,a=u?.position||p.Top,s=eY(t,i,l),c=eY(n,u,a);return{sourceX:s.x,sourceY:s.y,targetX:c.x,targetY:c.y,sourcePosition:l,targetPosition:a}}function eF(e){if(!e)return null;let t=[],n=[];for(let r of e)r.width=r.width??1,r.height=r.height??1,"source"===r.type?t.push(r):"target"===r.type&&n.push(r);return{source:t,target:n}}function eY(e,t,n=p.Left,r=!1){let o=(t?.x??0)+e.internals.positionAbsolute.x,i=(t?.y??0)+e.internals.positionAbsolute.y,{width:u,height:l}=t??ey(e);if(r)return{x:o+u/2,y:i+l/2};switch(t?.position??n){case p.Top:return{x:o+u/2,y:i};case p.Right:return{x:o+u,y:i+l/2};case p.Bottom:return{x:o+u/2,y:i+l};case p.Left:return{x:o,y:i+l/2}}}function eX(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function eW(e,t){if(!e)return"";if("string"==typeof e)return e;let n=t?`${t}__`:"";return`${n}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join("&")}`}function eq(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:o}){let i=new Set;return e.reduce((e,u)=>([u.markerStart||r,u.markerEnd||o].forEach(r=>{if(r&&"object"==typeof r){let o=eW(r,t);i.has(o)||(e.push({id:o,color:r.color||n,...r}),i.add(o))}}),e),[]).sort((e,t)=>e.id.localeCompare(t.id))}let eK={nodeOrigin:[0,0],nodeExtent:N,elevateNodesOnSelect:!0,defaults:{}},eQ={...eK,checkEquality:!0};function eG(e,t){let n={...e};for(let e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function eU(e,t,n){let r=eG(eK,n);for(let n of e.values())if(n.parentId)e0(n,e,t,r);else{let e=W(V(n,r.nodeOrigin),eh(n.extent)?n.extent:r.nodeExtent,ey(n));n.internals.positionAbsolute=e}}function eJ(e,t,n,r){let o=eG(eQ,r),i=e.length>0,u=new Map(t),l=o?.elevateNodesOnSelect?1e3:0;for(let a of(t.clear(),n.clear(),e)){let e=u.get(a.id);if(o.checkEquality&&a===e?.internals.userNode)t.set(a.id,e);else{let n=W(V(a,o.nodeOrigin),eh(a.extent)?a.extent:o.nodeExtent,ey(a));e={...o.defaults,...a,measured:{width:a.measured?.width,height:a.measured?.height},internals:{positionAbsolute:n,handleBounds:a.measured?e?.internals.handleBounds:void 0,z:e1(a,l),userNode:a}},t.set(a.id,e)}void 0!==e.measured&&void 0!==e.measured.width&&void 0!==e.measured.height||e.hidden||(i=!1),a.parentId&&e0(e,t,n,r)}return i}function e0(e,t,n,r){let{elevateNodesOnSelect:o,nodeOrigin:i,nodeExtent:u}=eG(eK,r),l=e.parentId,a=t.get(l);if(!a){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}!function(e,t){if(!e.parentId)return;let n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}(e,n);let{x:s,y:d,z:c}=function(e,t,n,r,o){let{x:i,y:u}=t.internals.positionAbsolute,l=ey(e),a=V(e,n),s=eh(e.extent)?W(a,e.extent,l):a,d=W({x:i+s.x,y:u+s.y},r,l);"parent"===e.extent&&(d=q(d,l,t));let c=e1(e,o),f=t.internals.z??0;return{x:d.x,y:d.y,z:f>c?f:c}}(e,a,i,u,o?1e3:0),{positionAbsolute:f}=e.internals,h=s!==f.x||d!==f.y;(h||c!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:h?{x:s,y:d}:f,z:c}})}function e1(e,t){return(ei(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function e2(e,t,n,r=[0,0]){let o=[],i=new Map;for(let n of e){let e=t.get(n.parentId);if(!e)continue;let r=en(i.get(n.parentId)?.expandedRect??ee(e),n.rect);i.set(n.parentId,{expandedRect:r,parent:e})}return i.size>0&&i.forEach(({expandedRect:t,parent:i},u)=>{let l=i.internals.positionAbsolute,a=ey(i),s=i.origin??r,d=t.x<l.x?Math.round(Math.abs(l.x-t.x)):0,c=t.y<l.y?Math.round(Math.abs(l.y-t.y)):0,f=Math.max(a.width,Math.round(t.width)),h=Math.max(a.height,Math.round(t.height)),y=(f-a.width)*s[0],p=(h-a.height)*s[1];(d>0||c>0||y||p)&&(o.push({id:u,type:"position",position:{x:i.position.x-d+y,y:i.position.y-c+p}}),n.get(u)?.forEach(t=>{e.some(e=>e.id===t.id)||o.push({id:t.id,type:"position",position:{x:t.position.x+d,y:t.position.y+c}})})),(a.width<t.width||a.height<t.height||d||c)&&o.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:f+(d?s[0]*d-y:0),height:h+(c?s[1]*c-p:0)}})}),o}function e5(e,t,n,r,o,i){let u=r?.querySelector(".xyflow__viewport"),l=!1;if(!u)return{changes:[],updatedInternals:l};let a=[],s=window.getComputedStyle(u),{m22:d}=new window.DOMMatrixReadOnly(s.transform),c=[];for(let r of e.values()){let e=t.get(r.id);if(!e)continue;if(e.hidden){t.set(e.id,{...e,internals:{...e.internals,handleBounds:void 0}}),l=!0;continue}let u=ew(r.nodeElement),s=e.measured.width!==u.width||e.measured.height!==u.height;if(u.width&&u.height&&(s||!e.internals.handleBounds||r.force)){let f=r.nodeElement.getBoundingClientRect(),h=eh(e.extent)?e.extent:i,{positionAbsolute:y}=e.internals;e.parentId&&"parent"===e.extent?y=q(y,u,t.get(e.parentId)):h&&(y=W(y,h,u));let p={...e,measured:u,internals:{...e.internals,positionAbsolute:y,handleBounds:{source:eS("source",r.nodeElement,f,d,e.id),target:eS("target",r.nodeElement,f,d,e.id)}}};t.set(e.id,p),e.parentId&&e0(p,t,n,{nodeOrigin:o}),l=!0,s&&(a.push({id:e.id,type:"dimensions",dimensions:u}),e.expandParent&&e.parentId&&c.push({id:e.id,parentId:e.parentId,rect:ee(p,o)}))}}if(c.length>0){let e=e2(c,t,n,o);a.push(...e)}return{changes:a,updatedInternals:l}}async function e3({delta:e,panZoom:t,transform:n,translateExtent:r,width:o,height:i}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);let u=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[o,i]],r);return Promise.resolve(!!u&&(u.x!==n[0]||u.y!==n[1]||u.k!==n[2]))}function e4(e,t,n,r,o,i){let u=o,l=r.get(u)||new Map;r.set(u,l.set(n,t)),u=`${o}-${e}`;let a=r.get(u)||new Map;if(r.set(u,a.set(n,t)),i){u=`${o}-${e}-${i}`;let l=r.get(u)||new Map;r.set(u,l.set(n,t))}}function e8(e,t,n){for(let r of(e.clear(),t.clear(),n)){let{source:n,target:o,sourceHandle:i=null,targetHandle:u=null}=r,l={edgeId:r.id,source:n,target:o,sourceHandle:i,targetHandle:u},a=`${n}-${i}--${o}-${u}`;e4("source",l,`${o}-${u}--${n}-${i}`,e,n,i),e4("target",l,a,e,o,u),t.set(r.id,r)}}function e6(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)break;r=r?.parentElement}while(r);return!1}function e7({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){let o=[];for(let[e,i]of t){let t=n.get(e)?.internals.userNode;t&&o.push({...t,position:i.position,dragging:r})}if(!e)return[o[0],o];let i=n.get(e)?.internals.userNode;return[i?{...i,position:t.get(e)?.position||i.position,dragging:r}:o[0],o]}function e9({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:o}){let i={x:null,y:null},u=0,l=new Map,a=!1,s={x:0,y:0},d=null,c=!1,f=null,h=!1;return{update:function({noDragClassName:y,handleSelector:p,domNode:g,isSelectable:H,nodeId:z,nodeClickDistance:N=0}){function T({x:e,y:n},o){let{nodeLookup:u,nodeExtent:a,snapGrid:s,snapToGrid:d,nodeOrigin:c,onNodeDrag:f,onSelectionDrag:h,onError:y,updateNodePositions:p}=t();i={x:e,y:n};let g=!1,x={x:0,y:0,x2:0,y2:0};for(let[t,r]of(l.size>1&&a&&(x=U(j(l))),l)){if(!u.has(t))continue;let o={x:e-r.distance.x,y:n-r.distance.y};d&&(o=el(o,s));let i=[[a[0][0],a[0][1]],[a[1][0],a[1][1]]];if(l.size>1&&a&&!r.extent){let{positionAbsolute:e}=r.internals,t=e.x-x.x+a[0][0],n=e.x+r.measured.width-x.x2+a[1][0];i=[[t,e.y-x.y+a[0][1]],[n,e.y+r.measured.height-x.y2+a[1][1]]]}let{position:f,positionAbsolute:h}=F({nodeId:t,nextPosition:o,nodeLookup:u,nodeExtent:i,nodeOrigin:c,onError:y});g=g||r.position.x!==f.x||r.position.y!==f.y,r.position=f,r.internals.positionAbsolute=h}if(g&&(p(l,!0),o&&(r||f||!z&&h))){let[e,t]=e7({nodeId:z,dragItems:l,nodeLookup:u});r?.(o,l,e,t),f?.(o,e,t),z||h?.(o,t)}}async function k(){if(!d)return;let{transform:e,panBy:n,autoPanSpeed:r,autoPanOnNodeDrag:o}=t();if(!o){a=!1,cancelAnimationFrame(u);return}let[l,c]=Q(s,d,r);(0!==l||0!==c)&&(i.x=(i.x??0)-l/e[2],i.y=(i.y??0)-c/e[2],await n({x:l,y:c})&&T(i,null)),u=requestAnimationFrame(k)}function A(r){let{nodeLookup:o,multiSelectionActive:u,nodesDraggable:a,transform:s,snapGrid:f,snapToGrid:h,selectNodesOnDrag:y,onNodeDragStart:p,onSelectionDragStart:g,unselectNodesAndEdges:x}=t();c=!0,y&&H||u||!z||o.get(z)?.selected||x(),H&&y&&z&&e?.(z);let m=ev(r.sourceEvent,{transform:s,snapGrid:f,snapToGrid:h,containerBounds:d});if(i=m,(l=function(e,t,n,r){let o=new Map;for(let[i,u]of e)if((u.selected||u.id===r)&&(!u.parentId||!function e(t,n){if(!t.parentId)return!1;let r=n.get(t.parentId);return!!r&&(!!r.selected||e(r,n))}(u,e))&&(u.draggable||t&&void 0===u.draggable)){let t=e.get(i);t&&o.set(i,{id:i,position:t.position||{x:0,y:0},distance:{x:n.x-t.internals.positionAbsolute.x,y:n.y-t.internals.positionAbsolute.y},extent:t.extent,parentId:t.parentId,origin:t.origin,expandParent:t.expandParent,internals:{positionAbsolute:t.internals.positionAbsolute||{x:0,y:0}},measured:{width:t.measured.width??0,height:t.measured.height??0}})}return o}(o,a,m,z)).size>0&&(n||p||!z&&g)){let[e,t]=e7({nodeId:z,dragItems:l,nodeLookup:o});n?.(r.sourceEvent,l,e,t),p?.(r.sourceEvent,e,t),z||g?.(r.sourceEvent,t)}}f=(0,m.Z)(g);let B=(function(){var e,t,n,r,o=$,i=I,u=S,l=P,a={},s=(0,x.Z)("start","drag","end"),d=0,c=0;function f(e){e.on("mousedown.drag",h).filter(l).on("touchstart.drag",g).on("touchmove.drag",H,b.Q7).on("touchend.drag touchcancel.drag",z).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(u,l){if(!r&&o.call(this,u,l)){var a=N(this,i.call(this,u,l),u,l,"mouse");a&&((0,m.Z)(u.view).on("mousemove.drag",y,b.Dd).on("mouseup.drag",p,b.Dd),(0,w.Z)(u.view),(0,b.rG)(u),n=!1,e=u.clientX,t=u.clientY,a("start",u))}}function y(r){if((0,b.ZP)(r),!n){var o=r.clientX-e,i=r.clientY-t;n=o*o+i*i>c}a.mouse("drag",r)}function p(e){(0,m.Z)(e.view).on("mousemove.drag mouseup.drag",null),(0,w.D)(e.view,n),(0,b.ZP)(e),a.mouse("end",e)}function g(e,t){if(o.call(this,e,t)){var n,r,u=e.changedTouches,l=i.call(this,e,t),a=u.length;for(n=0;n<a;++n)(r=N(this,l,e,t,u[n].identifier,u[n]))&&((0,b.rG)(e),r("start",e,u[n]))}}function H(e){var t,n,r=e.changedTouches,o=r.length;for(t=0;t<o;++t)(n=a[r[t].identifier])&&((0,b.ZP)(e),n("drag",e,r[t]))}function z(e){var t,n,o=e.changedTouches,i=o.length;for(r&&clearTimeout(r),r=setTimeout(function(){r=null},500),t=0;t<i;++t)(n=a[o[t].identifier])&&((0,b.rG)(e),n("end",e,o[t]))}function N(e,t,n,r,o,i){var l,c,h,y=s.copy(),p=(0,v.Z)(i||n,t);if(null!=(h=u.call(e,new M("beforestart",{sourceEvent:n,target:f,identifier:o,active:d,x:p[0],y:p[1],dx:0,dy:0,dispatch:y}),r)))return l=h.x-p[0]||0,c=h.y-p[1]||0,function n(i,u,s){var g,x=p;switch(i){case"start":a[o]=n,g=d++;break;case"end":delete a[o],--d;case"drag":p=(0,v.Z)(s||u,t),g=d}y.call(i,e,new M(i,{sourceEvent:u,subject:h,target:f,identifier:o,active:g,x:p[0]+l,y:p[1]+c,dx:p[0]-x[0],dy:p[1]-x[1],dispatch:y}),r)}}return f.filter=function(e){return arguments.length?(o="function"==typeof e?e:E(!!e),f):o},f.container=function(e){return arguments.length?(i="function"==typeof e?e:E(e),f):i},f.subject=function(e){return arguments.length?(u="function"==typeof e?e:E(e),f):u},f.touchable=function(e){return arguments.length?(l="function"==typeof e?e:E(!!e),f):l},f.on=function(){var e=s.on.apply(s,arguments);return e===s?f:e},f.clickDistance=function(e){return arguments.length?(c=(e=+e)*e,f):Math.sqrt(c)},f})().clickDistance(N).on("start",e=>{let{domNode:n,nodeDragThreshold:r,transform:o,snapGrid:u,snapToGrid:l}=t();d=n?.getBoundingClientRect()||null,h=!1,0===r&&A(e),i=ev(e.sourceEvent,{transform:o,snapGrid:u,snapToGrid:l,containerBounds:d}),s=eI(e.sourceEvent,d)}).on("drag",e=>{let{autoPanOnNodeDrag:n,transform:r,snapGrid:o,snapToGrid:u,nodeDragThreshold:f,nodeLookup:y}=t(),p=ev(e.sourceEvent,{transform:r,snapGrid:o,snapToGrid:u,containerBounds:d});if(("touchmove"===e.sourceEvent.type&&e.sourceEvent.touches.length>1||z&&!y.has(z))&&(h=!0),!h){if(!a&&n&&c&&(a=!0,k()),!c){let t=p.xSnapped-(i.x??0),n=p.ySnapped-(i.y??0);Math.sqrt(t*t+n*n)>f&&A(e)}(i.x!==p.xSnapped||i.y!==p.ySnapped)&&l&&c&&(s=eI(e.sourceEvent,d),T(p,e.sourceEvent))}}).on("end",e=>{if(c&&!h&&(a=!1,c=!1,cancelAnimationFrame(u),l.size>0)){let{nodeLookup:n,updateNodePositions:r,onNodeDragStop:i,onSelectionDragStop:u}=t();if(r(l,!1),o||i||!z&&u){let[t,r]=e7({nodeId:z,dragItems:l,nodeLookup:n,dragging:!1});o?.(e.sourceEvent,l,t,r),i?.(e.sourceEvent,t,r),z||u?.(e.sourceEvent,r)}}}).filter(e=>{let t=e.target;return!e.button&&(!y||!e6(t,`.${y}`,g))&&(!p||e6(t,p,g))});f.call(B)},destroy:function(){f?.on(".drag",null)}}}function te(e,t,n,r,o,i=!1){let u=r.get(e);if(!u)return null;let l="strict"===o?u.internals.handleBounds?.[t]:[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]],a=(n?l?.find(e=>e.id===n):l?.[0])??null;return a&&i?{...a,...eY(u,a,a.position,!0)}:a}function tt(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}let tn=()=>!0;function tr(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:o,fromType:i,doc:u,lib:l,flowId:a,isValidConnection:s=tn,nodeLookup:c}){let f="target"===i,h=t?u.querySelector(`.${l}-flow__handle[data-id="${a}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:p}=eI(e),g=u.elementFromPoint(y,p),x=g?.classList.contains(`${l}-flow__handle`)?g:h,m={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){let e=tt(void 0,x),t=x.getAttribute("data-nodeid"),i=x.getAttribute("data-handleid"),u=x.classList.contains("connectable"),l=x.classList.contains("connectableend");if(!t||!e)return m;let a={source:f?t:r,sourceHandle:f?i:o,target:f?r:t,targetHandle:f?o:i};m.connection=a;let h=u&&l&&(n===d.Strict?f&&"source"===e||!f&&"target"===e:t!==r||i!==o);m.isValid=h&&s(a),m.toHandle=te(t,e,i,c,n,!1)}return m}let to={onPointerDown:function(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:o,edgeUpdaterType:i,isTarget:u,domNode:l,nodeLookup:a,lib:s,autoPanOnConnect:d,flowId:c,panBy:f,cancelConnection:h,onConnectStart:y,onConnect:g,onConnectEnd:x,isValidConnection:m=tn,onReconnectEnd:v,updateConnection:w,getTransform:b,getFromHandle:E,autoPanSpeed:M}){let $;let I=eb(e.target),S=0,{x:P,y:H}=eI(e),z=tt(i,I?.elementFromPoint(P,H)),N=l?.getBoundingClientRect();if(!N||!z)return;let T=te(o,z,r,a,t);if(!T)return;let k=eI(e,N),B=!1,L=null,O=!1,_=null,V={...T,nodeId:o,type:z,position:T.position},R=a.get(o),j={inProgress:!0,isValid:null,from:eY(R,V,p.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:R,to:k,toHandle:null,toPosition:A[V.position],toNode:null};w(j);let C=j;function D(e){var i,l;let h;if(!E()||!V){Z(e);return}let y=b();$=function(e,t,n,r){let o=[],i=1/0;for(let u of function(e,t,n){let r=[],o={x:e.x-n,y:e.y-n,width:2*n,height:2*n};for(let e of t.values())er(o,ee(e))>0&&r.push(e);return r}(e,n,t+250))for(let n of[...u.internals.handleBounds?.source??[],...u.internals.handleBounds?.target??[]]){if(r.nodeId===n.nodeId&&r.type===n.type&&r.id===n.id)continue;let{x:l,y:a}=eY(u,n,n.position,!0),s=Math.sqrt(Math.pow(l-e.x,2)+Math.pow(a-e.y,2));s>t||(s<i?(o=[{...n,x:l,y:a}],i=s):s===i&&o.push({...n,x:l,y:a}))}if(!o.length)return null;if(o.length>1){let e="source"===r.type?"target":"source";return o.find(t=>t.type===e)??o[0]}return o[0]}(ea(k=eI(e,N),y,!1,[1,1]),n,a,V),B||(function e(){if(!d||!N)return;let[t,n]=Q(k,N,M);f({x:t,y:n}),S=requestAnimationFrame(e)}(),B=!0);let p=tr(e,{handle:$,connectionMode:t,fromNodeId:o,fromHandleId:r,fromType:u?"target":"source",isValidConnection:m,doc:I,lib:s,flowId:c,nodeLookup:a});_=p.handleDomNode,L=p.connection,i=!!$,l=p.isValid,h=null,l?h=!0:i&&!l&&(h=!1),O=h;let g={...C,isValid:O,to:$&&O?es({x:$.x,y:$.y},y):k,toHandle:p.toHandle,toPosition:O&&p.toHandle?p.toHandle.position:A[V.position],toNode:p.toHandle?a.get(p.toHandle.nodeId):null};O&&$&&C.toHandle&&g.toHandle&&C.toHandle.type===g.toHandle.type&&C.toHandle.nodeId===g.toHandle.nodeId&&C.toHandle.id===g.toHandle.id&&C.to.x===g.to.x&&C.to.y===g.to.y||(w(g),C=g)}function Z(e){($||_)&&L&&O&&g?.(L);let{inProgress:t,...n}=C,r={...n,toPosition:C.toHandle?C.toPosition:null};x?.(e,r),i&&v?.(e,r),h(),cancelAnimationFrame(S),B=!1,O=!1,L=null,_=null,I.removeEventListener("mousemove",D),I.removeEventListener("mouseup",Z),I.removeEventListener("touchmove",D),I.removeEventListener("touchend",Z)}y?.(e,{nodeId:o,handleId:r,handleType:z}),I.addEventListener("mousemove",D),I.addEventListener("mouseup",Z),I.addEventListener("touchmove",D),I.addEventListener("touchend",Z)},isValid:tr};function ti({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){let o=(0,m.Z)(e);return{update:function({translateExtent:e,width:i,height:u,zoomStep:l=10,pannable:a=!0,zoomable:s=!0,inversePan:d=!1}){let c=[0,0],f=(0,H.sP)().on("start",e=>{("mousedown"===e.sourceEvent.type||"touchstart"===e.sourceEvent.type)&&(c=[e.sourceEvent.clientX??e.sourceEvent.touches[0].clientX,e.sourceEvent.clientY??e.sourceEvent.touches[0].clientY])}).on("zoom",a?o=>{let l=n();if("mousemove"!==o.sourceEvent.type&&"touchmove"!==o.sourceEvent.type||!t)return;let a=[o.sourceEvent.clientX??o.sourceEvent.touches[0].clientX,o.sourceEvent.clientY??o.sourceEvent.touches[0].clientY],s=[a[0]-c[0],a[1]-c[1]];c=a;let f=r()*Math.max(l[2],Math.log(l[2]))*(d?-1:1),h={x:l[0]-s[0]*f,y:l[1]-s[1]*f};t.setViewportConstrained({x:h.x,y:h.y,zoom:l[2]},[[0,0],[i,u]],e)}:null).on("zoom.wheel",s?e=>{let r=n();if("wheel"!==e.sourceEvent.type||!t)return;let o=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*l,i=r[2]*Math.pow(2,o);t.scaleTo(i)}:null);o.call(f,{})},destroy:function(){o.on("zoom",null)},pointer:v.Z}}let tu=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,tl=e=>({x:e.x,y:e.y,zoom:e.k}),ta=({x:e,y:t,zoom:n})=>H.CR.translate(e,t).scale(n),ts=(e,t)=>e.target.closest(`.${t}`),td=(e,t)=>2===t&&Array.isArray(e)&&e.includes(2),tc=(e,t=0,n=()=>{})=>{let r="number"==typeof t&&t>0;return r||n(),r?e.transition().duration(t).on("end",n):e},tf=e=>{let t=e.ctrlKey&&ef()?10:1;return-e.deltaY*(1===e.deltaMode?.05:e.deltaMode?1:.002)*t};function th({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:o,viewport:i,onPanZoom:u,onPanZoomStart:l,onPanZoomEnd:a,onDraggingChange:s}){let d={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},f=e.getBoundingClientRect(),h=(0,H.sP)().clickDistance(!ei(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(o),y=(0,m.Z)(e).call(h);b({x:i.x,y:i.y,zoom:X(i.zoom,t,n)},[[0,0],[f.width,f.height]],o);let p=y.on("wheel.zoom"),g=y.on("dblclick.zoom");function x(e,t){return y?new Promise(n=>{h?.transform(tc(y,t?.duration,()=>n(!0)),e)}):Promise.resolve(!1)}function w(){h.on("zoom",null)}async function b(e,t,n){let r=ta(e),o=h?.constrain()(r,t,n);return o&&await x(o),new Promise(e=>e(o))}return h.wheelDelta(tf),{update:function({noWheelClassName:e,noPanClassName:t,onPaneContextMenu:n,userSelectionActive:r,panOnScroll:o,panOnDrag:i,panOnScrollMode:f,panOnScrollSpeed:x,preventScrolling:m,zoomOnPinch:b,zoomOnScroll:E,zoomOnDoubleClick:M,zoomActivationKeyPressed:$,lib:I,onTransformChange:S}){r&&!d.isZoomingOrPanning&&w();let P=!o||$||r?function({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,o){let i="wheel"===r.type,u=!t&&i&&!r.ctrlKey,l=ts(r,e);if(r.ctrlKey&&i&&l&&r.preventDefault(),u||l)return null;r.preventDefault(),n.call(this,r,o)}}({noWheelClassName:e,preventScrolling:m,d3ZoomHandler:p}):function({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:o,panOnScrollSpeed:i,zoomOnPinch:u,onPanZoomStart:l,onPanZoom:a,onPanZoomEnd:s}){return d=>{if(ts(d,t))return!1;d.preventDefault(),d.stopImmediatePropagation();let f=n.property("__zoom").k||1;if(d.ctrlKey&&u){let e=(0,v.Z)(d),t=tf(d);r.scaleTo(n,f*Math.pow(2,t),e,d);return}let h=1===d.deltaMode?20:1,y=o===c.Vertical?0:d.deltaX*h,p=o===c.Horizontal?0:d.deltaY*h;!ef()&&d.shiftKey&&o!==c.Vertical&&(y=d.deltaY*h,p=0),r.translateBy(n,-(y/f)*i,-(p/f)*i,{internal:!0});let g=tl(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(d,g)),e.isPanScrolling&&(a?.(d,g),e.panScrollTimeout=setTimeout(()=>{s?.(d,g),e.isPanScrolling=!1},150))}}({zoomPanValues:d,noWheelClassName:e,d3Selection:y,d3Zoom:h,panOnScrollMode:f,panOnScrollSpeed:x,zoomOnPinch:b,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:a});if(y.on("wheel.zoom",P,{passive:!1}),!r){let e=function({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;let o=tl(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=o,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,o)}}({zoomPanValues:d,onDraggingChange:s,onPanZoomStart:l});h.on("start",e);let t=function({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:o}){return i=>{e.usedRightMouseButton=!!(n&&td(t,e.mouseButton??0)),i.sourceEvent?.sync||r([i.transform.x,i.transform.y,i.transform.k]),o&&!i.sourceEvent?.internal&&o?.(i.sourceEvent,tl(i.transform))}}({zoomPanValues:d,panOnDrag:i,onPaneContextMenu:!!n,onPanZoom:u,onTransformChange:S});h.on("zoom",t);let r=function({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:o,onPaneContextMenu:i}){return u=>{if(!u.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,i&&td(t,e.mouseButton??0)&&!e.usedRightMouseButton&&u.sourceEvent&&i(u.sourceEvent),e.usedRightMouseButton=!1,r(!1),o&&tu(e.prevViewport,u.transform))){let t=tl(u.transform);e.prevViewport=t,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{o?.(u.sourceEvent,t)},n?150:0)}}}({zoomPanValues:d,panOnDrag:i,panOnScroll:o,onPaneContextMenu:n,onPanZoomEnd:a,onDraggingChange:s});h.on("end",r)}let H=function({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:o,zoomOnDoubleClick:i,userSelectionActive:u,noWheelClassName:l,noPanClassName:a,lib:s}){return d=>{let c=e||t,f=n&&d.ctrlKey;if(1===d.button&&"mousedown"===d.type&&(ts(d,`${s}-flow__node`)||ts(d,`${s}-flow__edge`)))return!0;if(!r&&!c&&!o&&!i&&!n||u||ts(d,l)&&"wheel"===d.type||ts(d,a)&&("wheel"!==d.type||o&&"wheel"===d.type&&!e)||!n&&d.ctrlKey&&"wheel"===d.type)return!1;if(!n&&"touchstart"===d.type&&d.touches?.length>1)return d.preventDefault(),!1;if(!c&&!o&&!f&&"wheel"===d.type||!r&&("mousedown"===d.type||"touchstart"===d.type)||Array.isArray(r)&&!r.includes(d.button)&&"mousedown"===d.type)return!1;let h=Array.isArray(r)&&r.includes(d.button)||!d.button||d.button<=1;return(!d.ctrlKey||"wheel"===d.type)&&h}}({zoomActivationKeyPressed:$,panOnDrag:i,zoomOnScroll:E,panOnScroll:o,zoomOnDoubleClick:M,zoomOnPinch:b,userSelectionActive:r,noPanClassName:t,noWheelClassName:e,lib:I});h.filter(H),M?y.on("dblclick.zoom",g):y.on("dblclick.zoom",null)},destroy:w,setViewport:async function(e,t){let n=ta(e);return await x(n,t),new Promise(e=>e(n))},setViewportConstrained:b,getViewport:function(){let e=y?(0,H.P2)(y.node()):{x:0,y:0,k:1};return{x:e.x,y:e.y,zoom:e.k}},scaleTo:function(e,t){return y?new Promise(n=>{h?.scaleTo(tc(y,t?.duration,()=>n(!0)),e)}):Promise.resolve(!1)},scaleBy:function(e,t){return y?new Promise(n=>{h?.scaleBy(tc(y,t?.duration,()=>n(!0)),e)}):Promise.resolve(!1)},setScaleExtent:function(e){h?.scaleExtent(e)},setTranslateExtent:function(e){h?.translateExtent(e)},syncViewport:function(e){if(y){let t=ta(e),n=y.property("__zoom");(n.k!==e.zoom||n.x!==e.x||n.y!==e.y)&&h?.transform(y,t,null,{sync:!0})}},setClickDistance:function(e){let t=!ei(e)||e<0?0:e;h?.clickDistance(t)}}}(s=g||(g={})).Line="line",s.Handle="handle"},10034:function(e,t,n){"use strict";var r=n(2265),o="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},i=r.useState,u=r.useEffect,l=r.useLayoutEffect,a=r.useDebugValue;function s(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!o(e,n)}catch(e){return!0}}var d="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=i({inst:{value:n,getSnapshot:t}}),o=r[0].inst,d=r[1];return l(function(){o.value=n,o.getSnapshot=t,s(o)&&d({inst:o})},[e,n,t]),u(function(){return s(o)&&d({inst:o}),e(function(){s(o)&&d({inst:o})})},[e]),a(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},83044:function(e,t,n){"use strict";var r=n(2265),o=n(53941),i="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},u=o.useSyncExternalStore,l=r.useRef,a=r.useEffect,s=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,o){var c=l(null);if(null===c.current){var f={hasValue:!1,value:null};c.current=f}else f=c.current;var h=u(e,(c=s(function(){function e(e){if(!a){if(a=!0,u=e,e=r(e),void 0!==o&&f.hasValue){var t=f.value;if(o(t,e))return l=t}return l=e}if(t=l,i(u,e))return t;var n=r(e);return void 0!==o&&o(t,n)?t:(u=e,l=n)}var u,l,a=!1,s=void 0===n?null:n;return[function(){return e(t())},null===s?void 0:function(){return e(s())}]},[t,n,r,o]))[0],c[1]);return a(function(){f.hasValue=!0,f.value=h},[h]),d(h),h}},53941:function(e,t,n){"use strict";e.exports=n(10034)},35195:function(e,t,n){"use strict";e.exports=n(83044)},36190:function(){},83568:function(e,t,n){"use strict";n.d(t,{Z:function(){return function e(t){if("string"==typeof t||"number"==typeof t)return""+t;let n="";if(Array.isArray(t))for(let r=0,o;r<t.length;r++)""!==(o=e(t[r]))&&(n+=(n&&" ")+o);else for(let e in t)t[e]&&(n+=(n&&" ")+e);return n}}})},85854:function(e,t,n){"use strict";function r(e,t){if(Object.is(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(let[n,r]of e)if(!Object.is(r,t.get(n)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(let r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}n.d(t,{X:function(){return r}})},69829:function(e,t,n){"use strict";n.d(t,{F:function(){return f},s:function(){return d}});var r=n(2265),o=n(35195);let i=e=>{let t;let n=new Set,r=(e,r)=>{let o="function"==typeof e?e(t):e;if(!Object.is(o,t)){let e=t;t=(null!=r?r:"object"!=typeof o||null===o)?o:Object.assign({},t,o),n.forEach(n=>n(t,e))}},o=()=>t,i={setState:r,getState:o,getInitialState:()=>u,subscribe:e=>(n.add(e),()=>n.delete(e)),destroy:()=>{console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(r,o,i);return i},u=e=>e?i(e):i,{useDebugValue:l}=r,{useSyncExternalStoreWithSelector:a}=o,s=e=>e;function d(e,t=s,n){let r=a(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return l(r),r}let c=(e,t)=>{let n=u(e),r=(e,r=t)=>d(n,e,r);return Object.assign(r,n),r},f=(e,t)=>e?c(e,t):c}}]);