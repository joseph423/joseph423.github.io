(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[528],{3872:function(e,t,n){Promise.resolve().then(n.bind(n,6007))},6007:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return eo}});var a=n(7437),r=n(2265),o=n(5792),i=n(7589),s=n(511),c=n(335),l=n(3950),d=n(2988),u=n(4839),p=n(6259),v=n(317),m=n(8024),h=n(1738),x=n(9281),f=n(1175),g=n(8883),C=n(8632),Z=n(909),j=n(4535);let b=(0,j.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),y=(0,j.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);var k=n(467),S=n(7542);function w(e){return(0,S.ZP)("MuiMenuItem",e)}let I=(0,j.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),O=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],T=e=>{let{disabled:t,dense:n,divider:a,disableGutters:r,selected:o,classes:i}=e,s=(0,p.Z)({root:["root",n&&"dense",t&&"disabled",!r&&"gutters",a&&"divider",o&&"selected"]},w,i);return(0,d.Z)({},i,s)},M=(0,m.ZP)(g.Z,{shouldForwardProp:e=>(0,h.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})(e=>{let{theme:t,ownerState:n}=e;return(0,d.Z)({},t.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!n.disableGutters&&{paddingLeft:16,paddingRight:16},n.divider&&{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(I.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,v.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(I.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,v.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(I.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,v.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,v.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(I.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(I.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(b.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(b.inset)]:{marginLeft:52},["& .".concat(k.Z.root)]:{marginTop:0,marginBottom:0},["& .".concat(k.Z.inset)]:{paddingLeft:36},["& .".concat(y.root)]:{minWidth:36}},!n.dense&&{[t.breakpoints.up("sm")]:{minHeight:"auto"}},n.dense&&(0,d.Z)({minHeight:32,paddingTop:4,paddingBottom:4},t.typography.body2,{["& .".concat(y.root," svg")]:{fontSize:"1.25rem"}}))}),A=r.forwardRef(function(e,t){let n;let o=(0,x.Z)({props:e,name:"MuiMenuItem"}),{autoFocus:i=!1,component:s="li",dense:c=!1,divider:p=!1,disableGutters:v=!1,focusVisibleClassName:m,role:h="menuitem",tabIndex:g,className:j}=o,b=(0,l.Z)(o,O),y=r.useContext(f.Z),k=r.useMemo(()=>({dense:c||y.dense||!1,disableGutters:v}),[y.dense,c,v]),S=r.useRef(null);(0,C.Z)(()=>{i&&S.current&&S.current.focus()},[i]);let w=(0,d.Z)({},o,{dense:k.dense,divider:p,disableGutters:v}),I=T(o),A=(0,Z.Z)(S,t);return o.disabled||(n=void 0!==g?g:-1),(0,a.jsx)(f.Z.Provider,{value:k,children:(0,a.jsx)(M,(0,d.Z)({ref:A,role:h,tabIndex:n,component:s,focusVisibleClassName:(0,u.Z)(I.focusVisible,m),className:(0,u.Z)(I.root,j)},b,{ownerState:w,classes:I}))})});var D=n(8655),E=n(5061),N=n(7222),R=n(6792),z=n(9428),L=(0,r.forwardRef)(function(e,t){let{savedTapCount:n,selectedSavedTabCount:l,handleClickSelectAll:d,handleClickDeselectAll:u,handleClickDeleteSelected:p}=e,[v,m]=(0,r.useState)(void 0),[h,x]=(0,r.useState)(void 0),[f,g]=(0,r.useState)(n!==l),[C,Z]=(0,r.useState)(l>0),[j,b]=(0,r.useState)(l>0),y=()=>{m(void 0)};return(0,r.useEffect)(()=>{let e=()=>{g(n!==l),Z(l>0),b(l>0)};void 0===v?(console.log("Menu is closed"),x(()=>()=>{console.log("menuOnExited"),e(),x(void 0)})):e()},[v,n,l]),(0,a.jsxs)(E.Z,{ref:t,children:[l>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{size:"large",edge:"start","aria-label":"menu",className:"mr-2 text-theme-txt",onClick:u,children:(0,a.jsx)(i.Z,{})}),(0,a.jsxs)(s.Z,{variant:"h6",component:"div",className:"flex-grow text-theme-txt",children:[l," Selected"]})]}):(0,a.jsxs)(s.Z,{variant:"h6",component:"h1",className:"flex-grow text-theme-txt",children:[n," Saved Tap",n>1&&"s"]}),(0,a.jsx)(N.Z,{className:"text-theme-txt",title:"Store up to ".concat(R.G_," records"),children:(0,a.jsx)(c.Z,{size:"large",children:(0,a.jsx)(z.Z,{})})}),n>0&&(0,a.jsx)(c.Z,{size:"large","aria-label":"display more actions",edge:"end",onClick:e=>{m(e.currentTarget)},children:(0,a.jsx)(o.Z,{className:"text-theme-txt"})}),(0,a.jsxs)(D.Z,{id:"menu-appbar",anchorEl:v,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!v,onClose:y,onTransitionExited:h,children:[f&&(0,a.jsx)(A,{onClick:()=>{d(),y()},children:"Select All"}),C&&(0,a.jsx)(A,{onClick:()=>{u(),y()},children:"Deselect All"}),j&&(0,a.jsx)(A,{onClick:()=>{p(),y()},children:"Delete Selected"})]})]})}),P=n(9826),_=n(2505),V=n(7511),H=n(3287),F=n(354),B=n(8067),q=n(8361),G=n(6140);function X(e){let{text:t}=e;return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(s.Z,{component:"span",variant:"caption",className:"text-theme-txt mr-1",children:"*"}),(0,a.jsx)(s.Z,{component:"span",variant:"caption",className:"text-theme-txt",children:t})]})}var K=n(6461),W=n(6548),Y=n(6463);function J(e){let{isOpened:t,setIsOpened:n,handleClickCancel:r,savedTab:o}=e,i=(0,Y.useRouter)(),s=(0,K.t8)(),c=async e=>{await Promise.allSettled([P.u.set({key:R.I.LOADED_SAVE_ID,value:e.id}),P.u.set({key:R.I.TAP_COUNT,value:e.tapCount.toString()})]),s("The save record is loaded as the active tap."),n(!1),i.push("/")};return(0,a.jsxs)(H.Z,{open:t,onClose:r,children:[(0,a.jsx)(G.Z,{children:"Load Save"}),(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(q.Z,{className:"mb-4",children:'The save "'.concat(""!==o.name?o.name:"(unnamed)",'" will be loaded.')}),(0,a.jsx)(X,{text:"Everything not saved will be lost."}),(0,a.jsx)(X,{text:"You should save your active tap if you intend to keep it."})]}),(0,a.jsxs)(F.Z,{children:[(0,a.jsx)(W.Z,{onClick:r,children:"Cancel"}),(0,a.jsx)(W.Z,{onClick:()=>{c(o)},children:"Confirm"})]})]})}var U=n(4762),Q=n(7233);function $(e){let{isOpened:t,selectedSavedTabCount:n,handleClickConfirm:r,handleClickCancel:o}=e;return(0,a.jsxs)(H.Z,{open:t,onClose:o,children:[(0,a.jsx)(G.Z,{children:"Delete Saved Tap"}),(0,a.jsxs)(B.Z,{children:[(0,a.jsx)(q.Z,{className:"mb-4",children:"".concat(n," save(s) will be deleted.")}),(0,a.jsx)(X,{text:"If your active tap is in the selection, it will still be deleted."})]}),(0,a.jsxs)(F.Z,{children:[(0,a.jsx)(W.Z,{onClick:o,children:"Cancel"}),(0,a.jsx)(W.Z,{onClick:r,children:"Confirm"})]})]})}var ee=n(4987),et=n(6762),en=n(8969),ea=n(5147);let er=e=>{let{data:t,checkedRows:n,handleClickRowIcon:o,handleClickRow:i}=e,[s]=(0,en.T)(),c=(0,ea.KH)();return(0,r.useEffect)(()=>{console.log("On useEffect SavedTapList.")}),(0,a.jsx)(_.J,{height:s,itemSize:86,overscanCount:R.pz,rowComponent:V.A,data:t,iconType:n.size>0?"CHECKBOX":"SAVE",isChecked:e=>void 0!==n.get(e.id),handleClickRowIcon:o,handleClickRow:i,onScroll:e=>{let{scrollOffset:t}=e;return c(t>0)}})};function eo(){let e=(0,r.useRef)(null),t=(0,K.t8)(),[n,o]=(0,r.useState)(new Map),[i,c]=(0,r.useState)([]),[l,d]=(0,r.useState)(void 0),[u,p]=(0,r.useState)(!1),[v,m]=(0,r.useState)(!1),h=i.map(e=>({id:e.id,name:e.name,tapCount:e.tapCount,tapDt:e.updatedAt,footerDt:e.createdAt})),x=async()=>{let[e,a]=await Promise.all([(0,Q.X)(),P.u.get({key:R.I.LOADED_SAVE_ID})]);for(let t of Array.from(n.keys()))e.delete(t);P.u.set({key:R.I.SAVED_TAPS,value:(0,U.w)(e)}),c(Array.from(e.values()).reverse()),o(new Map),t("Deleted ".concat(n.size," tap save(s).")),"string"==typeof(null==a?void 0:a.value)&&void 0===e.get(a.value)&&P.u.remove({key:R.I.LOADED_SAVE_ID}),m(!1)};return(0,r.useEffect)(()=>{(async()=>{c(Array.from((await (0,Q.X)()).values()).reverse())})()},[]),(0,a.jsx)(ea.Yq,{children:(0,a.jsxs)(ee.gP,{topBarRef:e,children:[(0,a.jsx)(L,{ref:e,savedTapCount:i.length,selectedSavedTabCount:n.size,handleClickSelectAll:()=>{o(new Map(h.map(e=>[e.id,e])))},handleClickDeselectAll:()=>{o(new Map)},handleClickDeleteSelected:()=>{m(!0)}}),(0,a.jsx)(et.Z,{children:i.length>0?(0,a.jsx)(er,{data:h,checkedRows:n,handleClickRow:e=>{console.log("savedTapListHandleClickRow()",{index:e}),d(i[e]),p(!0)},handleClickRowIcon:e=>{console.log("savedTapListHandleClickRowIcon()",{index:e}),console.log(n.get(h[e].id)),void 0!==n.get(h[e].id)?n.delete(h[e].id):n.set(h[e].id,h[e]),console.log({checkedRows:n}),o(new Map(n))}}):(0,a.jsx)(s.Z,{variant:"body1",component:"div",className:"my-4 text-center text-theme-txt",children:"No record"})}),u&&void 0!==l&&(0,a.jsx)(J,{isOpened:u,setIsOpened:p,handleClickCancel:()=>p(!1),savedTab:l}),v&&n.size>0&&(0,a.jsx)($,{isOpened:v,selectedSavedTabCount:n.size,handleClickConfirm:()=>x(),handleClickCancel:()=>m(!1)})]})})}},354:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(7437),r=n(8784);function o(e){return(0,a.jsx)(r.Z,{...e})}},8361:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(7437),r=n(3269);function o(e){return(0,a.jsx)(r.Z,{...e})}},8067:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(7437),r=n(385);function o(e){return(0,a.jsx)(r.Z,{...e})}},6140:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(7437),r=n(824);function o(e){return(0,a.jsx)(r.Z,{...e})}},3287:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var a=n(7437),r=n(1096);function o(e){return(0,a.jsx)(r.Z,{...e})}},6461:function(e,t,n){"use strict";n.d(t,{T1:function(){return s},t8:function(){return c}});var a=n(7437),r=n(2265);let o=(0,r.createContext)(null),i=(0,r.createContext)(null),s=e=>{let{children:t,isOpened:n,showNotificationMessage:r}=e;return(0,a.jsx)(o.Provider,{value:n,children:(0,a.jsx)(i.Provider,{value:r,children:t})})},c=()=>(0,r.useContext)(i)},7589:function(e,t,n){"use strict";var a=n(3963);t.Z=void 0;var r=a(n(9118)),o=n(7437);t.Z=(0,r.default)((0,o.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},5792:function(e,t,n){"use strict";var a=n(3963);t.Z=void 0;var r=a(n(9118)),o=n(7437);t.Z=(0,r.default)((0,o.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},6463:function(e,t,n){"use strict";var a=n(1169);n.o(a,"usePathname")&&n.d(t,{usePathname:function(){return a.usePathname}}),n.o(a,"useRouter")&&n.d(t,{useRouter:function(){return a.useRouter}}),n.o(a,"useServerInsertedHTML")&&n.d(t,{useServerInsertedHTML:function(){return a.useServerInsertedHTML}})}},function(e){e.O(0,[866,944,124,968,67,513,971,23,744],function(){return e(e.s=3872)}),_N_E=e.O()}]);