(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1213],{62802:function(e,t,n){Promise.resolve().then(n.bind(n,2288))},35103:function(e,t,n){"use strict";n.d(t,{I:function(){return s},X:function(){return i}});var r=n(26062),a=n(21099),u=n(31671);let i=async()=>{let e=await u.u.get({key:a.I.SAVED_TAPS});return"string"==typeof(null==e?void 0:e.value)?(0,r.Xe)(e.value):new Map},s=async()=>{let e=await u.u.get({key:a.I.TAP_CHANGE_HISTORIES});return"string"==typeof(null==e?void 0:e.value)?(0,r.Xe)(e.value):new Map}},2288:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(57437),a=n(2265),u=n(4689),i=n(69740),s=n(46223),l=n(91991),o=n(31671);function c(e){let{children:t,extraClassName:n="",onClick:a}=e;return(0,r.jsx)(l.Z,{variant:"contained",className:"relative rounded-full p-0 before:float-left before:pb-[100%] before:content-[''] ".concat(n),onClick:a,children:t})}var d=n(38693),f=n(69598),v=n(61848),x=n(84e3),h=n(76695),m=n(12713);function p(e){return(0,r.jsx)(m.Z,{InputLabelProps:{shrink:!0},...e})}var g=n(85860),j=n(22560);function S(e){let{isOpened:t,handleClickReset:n,handleClickCancel:u}=e,[i,s]=(0,a.useState)(""),[o,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{!0===t&&s("")},[t]),(0,r.jsxs)(d.Z,{open:t,onClose:u,children:[(0,r.jsx)(h.Z,{children:"Reset Counter"}),(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(x.Z,{children:"You may specify a number, or leave it empty which by default will reset to zero."}),(0,r.jsx)(p,{type:"number",label:"Reset To",placeholder:"0",fullWidth:!0,value:i,onChange:e=>{s(t=>{if(e.target.value.length>10)return t;let n=Number(e.target.value);return""===e.target.value?e.target.value:n})},className:"mt-4"}),(0,r.jsx)(g.Z,{control:(0,r.jsx)(j.Z,{onChange:e=>{c(e.target.checked)},checked:o}),label:"Reset as an unsaved counter"})]}),(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(l.Z,{onClick:u,children:"Cancel"}),(0,r.jsx)(l.Z,{onClick:()=>n(Number(i),o),children:"Reset"})]})]})}var C=n(23996),b=n(69459);function w(e){let{isOpened:t,handleClickSave:n,handleClickCancel:u,loadedSave:i}=e,[s,o]=(0,a.useState)(""),[c,m]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{!0===t&&o(void 0!==i?i.name:"")},[t,i]),(0,r.jsxs)(d.Z,{open:t,onClose:u,children:[(0,r.jsx)(h.Z,{children:"Save Counter"}),(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(x.Z,{children:"To avoid confusion with other saves, an unique name is recommended."}),(0,r.jsx)(p,{label:"Save Name",placeholder:"(Unnamed)",fullWidth:!0,InputProps:{endAdornment:(0,r.jsxs)(C.Z,{position:"end",children:[s.length,"/",50]})},value:s,onChange:e=>{o(t=>e.target.value.length>50?t:e.target.value)},className:"mt-4"}),""!==s&&void 0!==i&&s!==i.name&&!1===c&&(0,r.jsxs)(b.Z,{className:"truncate",children:["Rename as ",(0,r.jsx)("b",{children:s})]}),void 0!==i&&(0,r.jsx)(g.Z,{control:(0,r.jsx)(j.Z,{onChange:e=>{m(e.target.checked)},checked:c}),label:"Save as a new copy"})]}),(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(l.Z,{onClick:u,children:"Cancel"}),(0,r.jsx)(l.Z,{onClick:()=>n(s,c),children:"Save"})]})]})}var k=n(21099),N=n(52801),y=n(26062),_=n(35103),Z=n(59697),A=n(16829),I=n(21770),E=n(83464);let T=e=>{let{tapCount:t}=e;return 0===t?"Tap to Count":1===t?"".concat(t," Tap"):t>1?"".concat(t," Taps"):void 0};function P(){let e=(0,N.t8)(),[t,n]=(0,a.useState)(void 0),[d,f]=(0,a.useState)(0),[v,x]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1);(0,I.D)({mutationFn:e=>E.Z.post("/api/ping",e),onSuccess:()=>{},onError:()=>{}});let p=async e=>{let t=await (0,_.I)();t.set(e.id,e),t.size>k.QK&&t.delete(Array.from(t.keys())[0]),await o.u.set({key:k.I.TAP_CHANGE_HISTORIES,value:(0,y.w_)(t)})},g=async()=>{if((await (0,_.X)()).size>k.G_){e("You have reached the max tap save count. Please remove some of your saves to continue.");return}x(!0)},j=async(r,a)=>{let u;let i=new Date,s=await (0,_.X)(),l=!1;a||void 0===t||void 0===s.get(t.id)?(u={id:i.getTime().toString(),name:r,tapCount:d,createdAt:i.toISOString()},s.delete(u.id),l=!0):u={...t,name:r,tapCount:d,updatedAt:i.toISOString()},s=new Map([...Array.from(s.entries()),[u.id,u]]),l&&s.size>k.G_&&e("You have reached the max tap save count. Please remove some of your saves to continue.");let c=[o.u.set({key:k.I.SAVED_TAPS,value:(0,y.w_)(s)})];l&&c.push(o.u.set({key:k.I.LOADED_SAVE_ID,value:u.id})),p({id:i.getTime().toString(),tap:u,action:"SAVE",createdAt:i.toISOString()}),Promise.allSettled(c),n(u),x(!1),e("The tap is saved.")};return(0,a.useEffect)(()=>()=>{},[]),(0,a.useEffect)(()=>{Promise.allSettled([new Promise(async e=>{let t=await o.u.get({key:k.I.LOADED_SAVE_ID});if("string"==typeof(null==t?void 0:t.value)){let e;let r=await o.u.get({key:k.I.SAVED_TAPS});if("string"==typeof r.value&&(e=(0,y.Xe)(r.value)),void 0!==e){let r=e.get(t.value);void 0!==r&&n(r)}}e(!0)}),new Promise(async e=>{let t=await o.u.get({key:k.I.TAP_COUNT});"string"==typeof(null==t?void 0:t.value)&&f(Number.parseInt(t.value)),e(!0)})])},[]),(0,r.jsx)(A.default,{heightProfile:"1",paddingProfile:"1",children:(0,r.jsxs)("div",{className:"m-auto flex h-full w-full max-w-2xl flex-1 flex-col justify-center p-4",children:[(0,r.jsxs)("div",{className:"flex w-full justify-between gap-3",children:[(0,r.jsx)(l.Z,{variant:"contained",className:"flex h-fit flex-col justify-start overflow-hidden bg-transparent p-0 shadow-none hover:bg-transparent hover:shadow-none dark:text-neutral-200",onClick:g,children:(0,r.jsxs)("div",{className:"relative rounded-md py-2 pl-3 pr-2 before:absolute before:left-0 before:top-0 before:h-full before:w-1 before:bg-emerald-600 before:content-[''] dark:bg-neutral-800 dark:hover:bg-neutral-700",children:[void 0!==t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.J,{extraClassName:"mx-2 max-w-[150px] truncate px-1 text-xs font-medium normal-case",name:t.name}),(0,r.jsx)("div",{className:"my-1 w-full border-b border-solid dark:border-neutral-200/25"})]}),(0,r.jsxs)("div",{className:"mx-2 flex items-center",children:[(0,r.jsx)(u.Z,{className:"text-xl"}),(0,r.jsx)("span",{className:"ml-1 text-sm normal-case",children:"Click to Save"})]})]})}),(0,r.jsx)(w,{isOpened:v,handleClickSave:j,handleClickCancel:()=>x(!1),loadedSave:t}),(0,r.jsx)(c,{extraClassName:"w-28 dark:bg-red-800 dark:text-white dark:hover:bg-red-700",onClick:()=>m(!0),children:(0,r.jsxs)("div",{children:[(0,r.jsx)(i.Z,{className:"text-2xl"}),(0,r.jsx)("div",{className:"text-base",children:"Reset"})]})}),(0,r.jsx)(S,{isOpened:h,handleClickReset:(r,a)=>{let u=new Date,i=void 0===r||isNaN(r)?0:r;o.u.set({key:k.I.TAP_COUNT,value:i.toString()}),p({id:u.getTime().toString(),tap:void 0!==t?t:{tapCount:d},action:"RESET",createdAt:u.toISOString()}),a&&(o.u.remove({key:k.I.LOADED_SAVE_ID}),n(void 0)),f(i),m(!1),e("The tap is reset.")},handleClickCancel:()=>m(!1)})]}),(0,r.jsx)(c,{extraClassName:"-mt-3 w-full dark:bg-amber-500 dark:text-neutral-900 dark:hover:bg-amber-400 dark:focus:bg-amber-400",onClick:()=>{f(e=>{let t=(e+1).toString().length<=10?e+1:e;return o.u.set({key:k.I.TAP_COUNT,value:t.toString()}),t})},children:(0,r.jsxs)("div",{className:"pt-4",children:[(0,r.jsx)("div",{className:"pb-3 text-4xl",children:(0,r.jsx)(T,{tapCount:d})}),(0,r.jsx)(s.Z,{className:"text-9xl"})]})})]})})}},69598:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(57437),a=n(9026);function u(e){return(0,r.jsx)(a.Z,{...e})}},84e3:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(57437),a=n(12258);function u(e){return(0,r.jsx)(a.Z,{...e})}},61848:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(57437),a=n(77468);function u(e){return(0,r.jsx)(a.Z,{...e})}},76695:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(57437),a=n(79507);function u(e){return(0,r.jsx)(a.Z,{...e})}},38693:function(e,t,n){"use strict";n.d(t,{Z:function(){return u}});var r=n(57437),a=n(53392);function u(e){return(0,r.jsx)(a.Z,{...e})}},16829:function(e,t,n){"use strict";n.d(t,{default:function(){return v}});var r=n(45008),a=n(57437),u=n(74072),i=n(32653),s=n(2069),l=n(26062);function o(){let e=(0,r._)(["min-h-dvh w-full"]);return o=function(){return e},e}function c(){let e=(0,r._)(["h-full"]);return c=function(){return e},e}function d(){let e=(0,r._)(["h-dvh"]);return d=function(){return e},e}function f(){let e=(0,r._)(["p-4 lg:px-6"]);return f=function(){return e},e}function v(e){let{heightProfile:t,paddingProfile:n,children:r}=e,v=(0,i.$o)(),x=(0,u.hB)(),h=(0,l.tw)(o()),m=(0,l.tw)(c());return"1"===t&&(h+=" "+(0,l.tw)(d())),"1"===n||(m+=" "+(0,l.tw)(f())),(0,a.jsx)(s.default,{className:h,style:{paddingTop:null==v?void 0:v.offsetHeight,paddingBottom:null==x?void 0:x.offsetHeight},children:(0,a.jsx)(s.default,{className:m,children:r})})}},59697:function(e,t,n){"use strict";n.d(t,{J:function(){return u}});var r=n(57437),a=n(46387);let u=e=>{let{extraClassName:t,component:n="div",name:u}=e,i=void 0!==u&&""!==u;return(0,r.jsx)(a.default,{component:n,variant:"body1",className:"".concat(i?"dark:text-neutral-200":"dark:text-neutral-200/50"," ").concat(t),children:i?u:"(Unnamed)"})}},74072:function(e,t,n){"use strict";n.d(t,{hB:function(){return l},jp:function(){return o},t9:function(){return s}});var r=n(57437),a=n(2265);let u=(0,a.createContext)(void 0),i=(0,a.createContext)(()=>{}),s=e=>{let{children:t}=e,[n,s]=(0,a.useState)(void 0);return(0,r.jsx)(u.Provider,{value:n,children:(0,r.jsx)(i.Provider,{value:s,children:t})})},l=()=>(0,a.useContext)(u),o=()=>(0,a.useContext)(i)},52801:function(e,t,n){"use strict";n.d(t,{T1:function(){return s},t8:function(){return l}});var r=n(57437),a=n(2265);let u=(0,a.createContext)(null),i=(0,a.createContext)(null),s=e=>{let{children:t,isOpened:n,showNotificationMessage:a}=e;return(0,r.jsx)(u.Provider,{value:n,children:(0,r.jsx)(i.Provider,{value:a,children:t})})},l=()=>(0,a.useContext)(i)},32653:function(e,t,n){"use strict";n.d(t,{$o:function(){return f},dt:function(){return d},s$:function(){return o},tG:function(){return c},w:function(){return v}});var r=n(57437),a=n(2265);let u=(0,a.createContext)(void 0),i=(0,a.createContext)(()=>{}),s=(0,a.createContext)(void 0),l=(0,a.createContext)(()=>{}),o=e=>{let{children:t}=e,[n,o]=(0,a.useState)(!1),[c,d]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{},[c]),(0,r.jsx)(u.Provider,{value:n,children:(0,r.jsx)(i.Provider,{value:o,children:(0,r.jsx)(s.Provider,{value:c,children:(0,r.jsx)(l.Provider,{value:d,children:t})})})})},c=()=>(0,a.useContext)(u),d=()=>(0,a.useContext)(i),f=()=>(0,a.useContext)(s),v=()=>(0,a.useContext)(l)},26062:function(e,t,n){"use strict";n.d(t,{Xe:function(){return a},oX:function(){return i},tw:function(){return u},w_:function(){return r}});let r=e=>JSON.stringify(Array.from(e)),a=e=>new Map(JSON.parse(e)),u=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return String.raw({raw:e},...n)},i=(e,t)=>{if(""===e.target.value)return t(""),!0;if("-"===e.target.value)return t("-"),!0;let n=parseInt(e.target.value,10);return!isNaN(n)&&(t(n),!0)}},21099:function(e,t,n){"use strict";n.d(t,{EN:function(){return i},G_:function(){return o},I:function(){return s},QK:function(){return c},ou:function(){return d},pz:function(){return l}});var r=n(45008),a=n(26062);function u(){let e=(0,r._)(["whitespace-pre"]);return u=function(){return e},e}let i={text:"#e5e7eb",background:"#171717",primary:"#f59e0b",secondary:"#10b981",neutral:"#262626",neutral2:"#737373"},s={TAP_COUNT:"tap-count",LOADED_SAVE_ID:"loaded-save-id",SAVED_TAPS:"saved-taps",TAP_CHANGE_HISTORIES:"tap-change-histories"},l=10,o=200,c=1e3,d={htmlInput:{className:{htmlInput:{className:(0,a.tw)(u())}}.htmlInput.className}}}},function(e){e.O(0,[6658,7987,422,4100,2713,2560,2371,4609,4138,7586,2971,2117,1744],function(){return e(e.s=62802)}),_N_E=e.O()}]);