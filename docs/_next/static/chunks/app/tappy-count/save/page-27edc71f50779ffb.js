(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1659],{50787:function(e,t,n){Promise.resolve().then(n.bind(n,67785))},67785:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return z}});var a=n(57437),r=n(2265),i=n(25792),o=n(77589),s=n(83719),l=n(60335),c=n(65553),d=n(11656),u=n(90659),p=n(80883),v=n(67222),m=n(26792),h=n(49428),f=n(16463),x=(0,r.forwardRef)(function(e,t){let{savedTapCount:n,selectedSavedTabCount:x,handleClickSelectAll:g,handleClickDeselectAll:Z,handleClickDeleteSelected:C}=e,j=(0,f.useRouter)(),[y,k]=(0,r.useState)(void 0),[b,w]=(0,r.useState)(void 0),[S,I]=(0,r.useState)(n!==x),[O,M]=(0,r.useState)(x>0),[A,D]=(0,r.useState)(x>0),T=()=>{k(void 0)};return(0,r.useEffect)(()=>{let e=()=>{I(n!==x),M(x>0),D(x>0)};void 0===y?(console.log("Menu is closed"),w(()=>()=>{console.log("menuOnExited"),e(),w(void 0)})):e()},[y,n,x]),(0,a.jsxs)(p.Z,{ref:t,children:[x>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{edge:"start",className:"mr-1 dark:text-neutral-200",onClick:Z,children:(0,a.jsx)(o.Z,{})}),(0,a.jsxs)(s.Z,{variant:"h6",component:"div",className:"flex-grow dark:text-neutral-200",children:[x," Selected"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(l.Z,{edge:"start",className:"mr-2 dark:text-neutral-200",onClick:()=>j.push("/tappy-count"),children:(0,a.jsx)(c.Z,{})}),(0,a.jsxs)(s.Z,{variant:"h6",component:"h1",className:"flex-grow dark:text-neutral-200",children:[n," Saved Tap",n>1&&"s"]})]}),(0,a.jsx)(v.Z,{className:"dark:text-neutral-200",title:"Store up to ".concat(m.G_," records"),children:(0,a.jsx)(l.Z,{size:"large",edge:!(n>0)&&"end",children:(0,a.jsx)(h.Z,{})})}),n>0&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(l.Z,{size:"large","aria-label":"display more actions",edge:"end",onClick:e=>{k(e.currentTarget)},children:(0,a.jsx)(i.Z,{className:"dark:text-neutral-200"})})}),(0,a.jsxs)(u.Z,{id:"menu-appbar",anchorEl:y,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!y,onClose:T,onTransitionExited:b,children:[S&&(0,a.jsx)(d.Z,{onClick:()=>{g(),T()},children:"Select All"}),O&&(0,a.jsx)(d.Z,{onClick:()=>{Z(),T()},children:"Deselect All"}),A&&(0,a.jsx)(d.Z,{onClick:()=>{C(),T()},children:"Delete Selected"})]})]})}),g=n(9826),Z=n(52505),C=n(47511),j=n(13287),y=n(90354),k=n(98067),b=n(58361),w=n(76140);function S(e){let{text:t}=e;return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(s.Z,{component:"span",variant:"caption",className:"mr-1 dark:text-neutral-200",children:"*"}),(0,a.jsx)(s.Z,{component:"span",variant:"caption",className:"dark:text-neutral-200",children:t})]})}var I=n(26461),O=n(60091);function M(e){let{isOpened:t,setIsOpened:n,handleClickCancel:r,savedTab:i}=e,o=(0,f.useRouter)(),s=(0,I.t8)(),l=async e=>{await Promise.allSettled([g.u.set({key:m.I.LOADED_SAVE_ID,value:e.id}),g.u.set({key:m.I.TAP_COUNT,value:e.tapCount.toString()})]),s("The save record is loaded as the active tap."),n(!1),o.push("/")};return(0,a.jsxs)(j.Z,{open:t,onClose:r,children:[(0,a.jsx)(w.Z,{children:"Load Save"}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(b.Z,{className:"mb-4",children:'The save "'.concat(""!==i.name?i.name:"(unnamed)",'" will be loaded.')}),(0,a.jsx)(S,{text:"Everything not saved will be lost."}),(0,a.jsx)(S,{text:"You should save your active tap if you intend to keep it."})]}),(0,a.jsxs)(y.Z,{children:[(0,a.jsx)(O.Z,{onClick:r,children:"Cancel"}),(0,a.jsx)(O.Z,{onClick:()=>{l(i)},children:"Confirm"})]})]})}var A=n(34762),D=n(57233);function T(e){let{isOpened:t,selectedSavedTabCount:n,handleClickConfirm:r,handleClickCancel:i}=e;return(0,a.jsxs)(j.Z,{open:t,onClose:i,children:[(0,a.jsx)(w.Z,{children:"Delete Saved Tap"}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(b.Z,{className:"mb-4",children:"".concat(n," save(s) will be deleted.")}),(0,a.jsx)(S,{text:"If your active tap is in the selection, it will still be deleted."})]}),(0,a.jsxs)(y.Z,{children:[(0,a.jsx)(O.Z,{onClick:i,children:"Cancel"}),(0,a.jsx)(O.Z,{onClick:r,children:"Confirm"})]})]})}var E=n(68969),N=n(45213),R=n(41933);let _=e=>{let{data:t,checkedRows:n,handleClickRowIcon:r,handleClickRow:i}=e,[o]=(0,E.T)(),s=(0,N.dt)();return(0,a.jsx)(Z.J,{height:o,itemSize:86,overscanCount:m.pz,rowComponent:C.A,data:t,iconType:n.size>0?"CHECKBOX":"SAVE",isChecked:e=>void 0!==n.get(e.id),handleClickRowIcon:r,handleClickRow:i,onScroll:e=>{let{scrollOffset:t}=e;return s(t>0)}})};function z(){let[e,t]=(0,R.h)(),n=(0,N.w)(),i=(0,I.t8)(),[o,l]=(0,r.useState)(new Map),[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)(void 0),[v,h]=(0,r.useState)(!1),[f,Z]=(0,r.useState)(!1),C=c.map(e=>({id:e.id,name:e.name,tapCount:e.tapCount,tapDt:e.updatedAt,footerDt:e.createdAt})),j=async()=>{let[e,t]=await Promise.all([(0,D.X)(),g.u.get({key:m.I.LOADED_SAVE_ID})]);for(let t of Array.from(o.keys()))e.delete(t);g.u.set({key:m.I.SAVED_TAPS,value:(0,A.w_)(e)}),d(Array.from(e.values()).reverse()),l(new Map),i("Deleted ".concat(o.size," tap save(s).")),"string"==typeof(null==t?void 0:t.value)&&void 0===e.get(t.value)&&g.u.remove({key:m.I.LOADED_SAVE_ID}),Z(!1)};return(0,r.useEffect)(()=>(console.log("Mount save/page.tsx"),()=>console.log("Unmount save/page.tsx")),[]),(0,r.useEffect)(()=>{(async()=>{d(Array.from((await (0,D.X)()).values()).reverse())})()},[]),(0,r.useEffect)(()=>{void 0!==t&&n(t)},[t]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x,{ref:e,savedTapCount:c.length,selectedSavedTabCount:o.size,handleClickSelectAll:()=>{l(new Map(C.map(e=>[e.id,e])))},handleClickDeselectAll:()=>{l(new Map)},handleClickDeleteSelected:()=>{Z(!0)}}),c.length>0?(0,a.jsx)(_,{data:C,checkedRows:o,handleClickRow:e=>{console.log("savedTapListHandleClickRow()",{index:e}),p(c[e]),h(!0)},handleClickRowIcon:e=>{console.log("savedTapListHandleClickRowIcon()",{index:e}),console.log(o.get(C[e].id)),void 0!==o.get(C[e].id)?o.delete(C[e].id):o.set(C[e].id,C[e]),console.log({checkedRows:o}),l(new Map(o))}}):(0,a.jsx)(s.Z,{variant:"body1",component:"div",className:"my-4 flex-1 text-center dark:text-neutral-200",children:"No record"}),v&&void 0!==u&&(0,a.jsx)(M,{isOpened:v,setIsOpened:h,handleClickCancel:()=>h(!1),savedTab:u}),f&&o.size>0&&(0,a.jsx)(T,{isOpened:f,selectedSavedTabCount:o.size,handleClickConfirm:()=>j(),handleClickCancel:()=>Z(!1)})]})}},90354:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(98784);function i(e){return(0,a.jsx)(r.Z,{...e})}},58361:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(23269);function i(e){return(0,a.jsx)(r.Z,{...e})}},98067:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(66124);function i(e){return(0,a.jsx)(r.Z,{...e})}},76140:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(80824);function i(e){return(0,a.jsx)(r.Z,{...e})}},13287:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(61096);function i(e){return(0,a.jsx)(r.Z,{...e})}},26461:function(e,t,n){"use strict";n.d(t,{T1:function(){return s},t8:function(){return l}});var a=n(57437),r=n(2265);let i=(0,r.createContext)(null),o=(0,r.createContext)(null),s=e=>{let{children:t,isOpened:n,showNotificationMessage:r}=e;return(0,a.jsx)(i.Provider,{value:n,children:(0,a.jsx)(o.Provider,{value:r,children:t})})},l=()=>(0,r.useContext)(o)},77589:function(e,t,n){"use strict";var a=n(23963);t.Z=void 0;var r=a(n(19118)),i=n(57437);t.Z=(0,r.default)((0,i.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear")},25792:function(e,t,n){"use strict";var a=n(23963);t.Z=void 0;var r=a(n(19118)),i=n(57437);t.Z=(0,r.default)((0,i.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert")},68525:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var a=n(72296),r=n(70587);function i(e){return(0,r.ZP)("MuiDivider",e)}let o=(0,a.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=o},82733:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var a=n(72296),r=n(70587);function i(e){return(0,r.ZP)("MuiListItemIcon",e)}let o=(0,a.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);t.Z=o},11656:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var a=n(2265),r=n(44839),i=n(76990),o=n(6031),s=n(41738),l=n(48024),c=n(339),d=n(95885),u=n(61175),p=n(80721),v=n(48632),m=n(60909),h=n(68525),f=n(82733),x=n(90467),g=n(72296),Z=n(70587);function C(e){return(0,Z.ZP)("MuiMenuItem",e)}let j=(0,g.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var y=n(57437);let k=e=>{let{disabled:t,dense:n,divider:a,disableGutters:r,selected:o,classes:s}=e,l=(0,i.Z)({root:["root",n&&"dense",t&&"disabled",!r&&"gutters",a&&"divider",o&&"selected"]},C,s);return{...s,...l}},b=(0,l.ZP)(p.Z,{shouldForwardProp:e=>(0,s.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((0,c.Z)(e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(j.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(j.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(j.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(j.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(j.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(h.Z.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(h.Z.inset)]:{marginLeft:52},["& .".concat(x.Z.root)]:{marginTop:0,marginBottom:0},["& .".concat(x.Z.inset)]:{paddingLeft:36},["& .".concat(f.Z.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,["& .".concat(f.Z.root," svg")]:{fontSize:"1.25rem"}}}]}}));var w=a.forwardRef(function(e,t){let n;let i=(0,d.i)({props:e,name:"MuiMenuItem"}),{autoFocus:o=!1,component:s="li",dense:l=!1,divider:c=!1,disableGutters:p=!1,focusVisibleClassName:h,role:f="menuitem",tabIndex:x,className:g,...Z}=i,C=a.useContext(u.Z),j=a.useMemo(()=>({dense:l||C.dense||!1,disableGutters:p}),[C.dense,l,p]),w=a.useRef(null);(0,v.Z)(()=>{o&&w.current&&w.current.focus()},[o]);let S={...i,dense:j.dense,divider:c,disableGutters:p},I=k(i),O=(0,m.Z)(w,t);return i.disabled||(n=void 0!==x?x:-1),(0,y.jsx)(u.Z.Provider,{value:j,children:(0,y.jsx)(b,{ref:O,role:f,tabIndex:n,component:s,focusVisibleClassName:(0,r.Z)(I.focusVisible,h),className:(0,r.Z)(I.root,g),...Z,ownerState:S,classes:I})})})}},function(e){e.O(0,[1866,365,2776,3061,346,5786,7185,3807,5650,7323,3687,2971,7023,1744],function(){return e(e.s=50787)}),_N_E=e.O()}]);