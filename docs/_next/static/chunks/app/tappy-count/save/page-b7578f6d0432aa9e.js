(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1659],{50787:function(e,t,n){Promise.resolve().then(n.bind(n,41799))},41799:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return V}});var a=n(57437),r=n(2265),i=n(32464),o=(0,i.Z)((0,a.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),s=(0,i.Z)((0,a.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear"),l=n(46387),c=n(59832),d=n(26484),u=n(42187),p=n(57742),v=n(31355),h=n(5669),m=n(21099),f=n(96374),x=n(99376),g=(0,r.forwardRef)(function(e,t){let{savedTapCount:n,selectedSavedTabCount:i,handleClickSelectAll:g,handleClickDeselectAll:C,handleClickDeleteSelected:Z}=e,j=(0,x.useRouter)(),[y,k]=(0,r.useState)(void 0),[b,w]=(0,r.useState)(void 0),[S,I]=(0,r.useState)(n!==i),[O,M]=(0,r.useState)(i>0),[A,D]=(0,r.useState)(i>0),T=()=>{k(void 0)};return(0,r.useEffect)(()=>{let e=()=>{I(n!==i),M(i>0),D(i>0)};void 0===y?(console.log("Menu is closed"),w(()=>()=>{console.log("menuOnExited"),e(),w(void 0)})):e()},[y,n,i]),(0,a.jsxs)(v.Z,{ref:t,children:[i>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{edge:"start",className:"mr-1 dark:text-neutral-200",onClick:C,children:(0,a.jsx)(s,{})}),(0,a.jsxs)(l.default,{variant:"h6",component:"div",className:"flex-grow dark:text-neutral-200",children:[i," Selected"]})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(c.Z,{edge:"start",className:"mr-2 dark:text-neutral-200",onClick:()=>j.push("/tappy-count"),children:(0,a.jsx)(d.Z,{})}),(0,a.jsxs)(l.default,{variant:"h6",component:"h1",className:"flex-grow dark:text-neutral-200",children:[n," Saved Tap",n>1&&"s"]})]}),(0,a.jsx)(h.Z,{className:"dark:text-neutral-200",title:"Store up to ".concat(m.G_," records"),children:(0,a.jsx)(c.Z,{size:"large",edge:!(n>0)&&"end",children:(0,a.jsx)(f.Z,{})})}),n>0&&(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(c.Z,{size:"large","aria-label":"display more actions",edge:"end",onClick:e=>{k(e.currentTarget)},children:(0,a.jsx)(o,{className:"dark:text-neutral-200"})})}),(0,a.jsxs)(p.Z,{id:"menu-appbar",anchorEl:y,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:!!y,onClose:T,onTransitionExited:b,children:[S&&(0,a.jsx)(u.Z,{onClick:()=>{g(),T()},children:"Select All"}),O&&(0,a.jsx)(u.Z,{onClick:()=>{C(),T()},children:"Deselect All"}),A&&(0,a.jsx)(u.Z,{onClick:()=>{Z(),T()},children:"Delete Selected"})]})]})}),C=n(31671),Z=n(59135),j=n(41122),y=n(38693),k=n(69598),b=n(61848),w=n(84e3),S=n(76695);function I(e){let{text:t}=e;return(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)(l.default,{component:"span",variant:"caption",className:"mr-1 dark:text-neutral-200",children:"*"}),(0,a.jsx)(l.default,{component:"span",variant:"caption",className:"dark:text-neutral-200",children:t})]})}var O=n(52801),M=n(91991);function A(e){let{isOpened:t,setIsOpened:n,handleClickCancel:r,savedTab:i}=e,o=(0,x.useRouter)(),s=(0,O.t8)(),l=async e=>{await Promise.allSettled([C.u.set({key:m.I.LOADED_SAVE_ID,value:e.id}),C.u.set({key:m.I.TAP_COUNT,value:e.tapCount.toString()})]),s("The save record is loaded as the active tap."),n(!1),o.push("/")};return(0,a.jsxs)(y.Z,{open:t,onClose:r,children:[(0,a.jsx)(S.Z,{children:"Load Save"}),(0,a.jsxs)(b.Z,{children:[(0,a.jsx)(w.Z,{className:"mb-4",children:'The save "'.concat(""!==i.name?i.name:"(unnamed)",'" will be loaded.')}),(0,a.jsx)(I,{text:"Everything not saved will be lost."}),(0,a.jsx)(I,{text:"You should save your active tap if you intend to keep it."})]}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(M.Z,{onClick:r,children:"Cancel"}),(0,a.jsx)(M.Z,{onClick:()=>{l(i)},children:"Confirm"})]})]})}var D=n(26062),T=n(35103);function E(e){let{isOpened:t,selectedSavedTabCount:n,handleClickConfirm:r,handleClickCancel:i}=e;return(0,a.jsxs)(y.Z,{open:t,onClose:i,children:[(0,a.jsx)(S.Z,{children:"Delete Saved Tap"}),(0,a.jsxs)(b.Z,{children:[(0,a.jsx)(w.Z,{className:"mb-4",children:"".concat(n," save(s) will be deleted.")}),(0,a.jsx)(I,{text:"If your active tap is in the selection, it will still be deleted."})]}),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(M.Z,{onClick:i,children:"Cancel"}),(0,a.jsx)(M.Z,{onClick:r,children:"Confirm"})]})]})}var N=n(72235),R=n(32653),_=n(85149),P=n(16829);let z=e=>{let{data:t,checkedRows:n,handleClickRowIcon:r,handleClickRow:i}=e,[o]=(0,N.T)(),s=(0,R.dt)();return(0,a.jsx)(Z.J,{height:o,itemSize:86,overscanCount:m.pz,rowComponent:j.A,data:t,iconType:n.size>0?"CHECKBOX":"SAVE",isChecked:e=>void 0!==n.get(e.id),handleClickRowIcon:r,handleClickRow:i,onScroll:e=>{let{scrollOffset:t}=e;return s(t>0)}})};function V(){let[e,t]=(0,_.h)(),n=(0,R.w)(),i=(0,O.t8)(),[o,s]=(0,r.useState)(new Map),[c,d]=(0,r.useState)([]),[u,p]=(0,r.useState)(void 0),[v,h]=(0,r.useState)(!1),[f,x]=(0,r.useState)(!1),Z=c.map(e=>({id:e.id,name:e.name,tapCount:e.tapCount,tapDt:e.updatedAt,footerDt:e.createdAt})),j=async()=>{let[e,t]=await Promise.all([(0,T.X)(),C.u.get({key:m.I.LOADED_SAVE_ID})]);for(let t of Array.from(o.keys()))e.delete(t);C.u.set({key:m.I.SAVED_TAPS,value:(0,D.w_)(e)}),d(Array.from(e.values()).reverse()),s(new Map),i("Deleted ".concat(o.size," tap save(s).")),"string"==typeof(null==t?void 0:t.value)&&void 0===e.get(t.value)&&C.u.remove({key:m.I.LOADED_SAVE_ID}),x(!1)};return(0,r.useEffect)(()=>(console.log("Mount save/page.tsx"),()=>console.log("Unmount save/page.tsx")),[]),(0,r.useEffect)(()=>{(async()=>{d(Array.from((await (0,T.X)()).values()).reverse())})()},[]),(0,r.useEffect)(()=>{void 0!==t&&n(t)},[t]),(0,a.jsxs)(P.default,{heightProfile:"1",paddingProfile:"1",children:[(0,a.jsx)(g,{ref:e,savedTapCount:c.length,selectedSavedTabCount:o.size,handleClickSelectAll:()=>{s(new Map(Z.map(e=>[e.id,e])))},handleClickDeselectAll:()=>{s(new Map)},handleClickDeleteSelected:()=>{x(!0)}}),c.length>0?(0,a.jsx)(z,{data:Z,checkedRows:o,handleClickRow:e=>{console.log("savedTapListHandleClickRow()",{index:e}),p(c[e]),h(!0)},handleClickRowIcon:e=>{console.log("savedTapListHandleClickRowIcon()",{index:e}),console.log(o.get(Z[e].id)),void 0!==o.get(Z[e].id)?o.delete(Z[e].id):o.set(Z[e].id,Z[e]),console.log({checkedRows:o}),s(new Map(o))}}):(0,a.jsx)(l.default,{variant:"body1",component:"div",className:"my-4 flex-1 text-center dark:text-neutral-200",children:"No record"}),v&&void 0!==u&&(0,a.jsx)(A,{isOpened:v,setIsOpened:h,handleClickCancel:()=>h(!1),savedTab:u}),f&&o.size>0&&(0,a.jsx)(E,{isOpened:f,selectedSavedTabCount:o.size,handleClickConfirm:()=>j(),handleClickCancel:()=>x(!1)})]})}},69598:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(9026);function i(e){return(0,a.jsx)(r.Z,{...e})}},84e3:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(12258);function i(e){return(0,a.jsx)(r.Z,{...e})}},61848:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(77468);function i(e){return(0,a.jsx)(r.Z,{...e})}},76695:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(79507);function i(e){return(0,a.jsx)(r.Z,{...e})}},38693:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var a=n(57437),r=n(53392);function i(e){return(0,a.jsx)(r.Z,{...e})}},52801:function(e,t,n){"use strict";n.d(t,{T1:function(){return s},t8:function(){return l}});var a=n(57437),r=n(2265);let i=(0,r.createContext)(null),o=(0,r.createContext)(null),s=e=>{let{children:t,isOpened:n,showNotificationMessage:r}=e;return(0,a.jsx)(i.Provider,{value:n,children:(0,a.jsx)(o.Provider,{value:r,children:t})})},l=()=>(0,r.useContext)(o)},42596:function(e,t,n){"use strict";n.d(t,{V:function(){return i}});var a=n(94143),r=n(50738);function i(e){return(0,r.ZP)("MuiDivider",e)}let o=(0,a.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);t.Z=o},67752:function(e,t,n){"use strict";n.d(t,{f:function(){return i}});var a=n(94143),r=n(50738);function i(e){return(0,r.ZP)("MuiListItemIcon",e)}let o=(0,a.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);t.Z=o},42187:function(e,t,n){"use strict";n.d(t,{Z:function(){return w}});var a=n(2265),r=n(61994),i=n(20801),o=n(65208),s=n(34765),l=n(16210),c=n(21086),d=n(37053),u=n(15566),p=n(52559),v=n(84217),h=n(60118),m=n(42596),f=n(67752),x=n(3127),g=n(94143),C=n(50738);function Z(e){return(0,C.ZP)("MuiMenuItem",e)}let j=(0,g.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var y=n(57437);let k=e=>{let{disabled:t,dense:n,divider:a,disableGutters:r,selected:o,classes:s}=e,l=(0,i.Z)({root:["root",n&&"dense",t&&"disabled",!r&&"gutters",a&&"divider",o&&"selected"]},Z,s);return{...s,...l}},b=(0,l.ZP)(p.Z,{shouldForwardProp:e=>(0,s.Z)(e)||"classes"===e,name:"MuiMenuItem",slot:"Root",overridesResolver:(e,t)=>{let{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]}})((0,c.Z)(e=>{let{theme:t}=e;return{...t.typography.body1,display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap","&:hover":{textDecoration:"none",backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(j.selected)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity),["&.".concat(j.focusVisible)]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.focusOpacity,"))"):(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},["&.".concat(j.selected,":hover")]:{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / calc(").concat(t.vars.palette.action.selectedOpacity," + ").concat(t.vars.palette.action.hoverOpacity,"))"):(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.primary.mainChannel," / ").concat(t.vars.palette.action.selectedOpacity,")"):(0,o.Fq)(t.palette.primary.main,t.palette.action.selectedOpacity)}},["&.".concat(j.focusVisible)]:{backgroundColor:(t.vars||t).palette.action.focus},["&.".concat(j.disabled)]:{opacity:(t.vars||t).palette.action.disabledOpacity},["& + .".concat(m.Z.root)]:{marginTop:t.spacing(1),marginBottom:t.spacing(1)},["& + .".concat(m.Z.inset)]:{marginLeft:52},["& .".concat(x.Z.root)]:{marginTop:0,marginBottom:0},["& .".concat(x.Z.inset)]:{paddingLeft:36},["& .".concat(f.Z.root)]:{minWidth:36},variants:[{props:e=>{let{ownerState:t}=e;return!t.disableGutters},style:{paddingLeft:16,paddingRight:16}},{props:e=>{let{ownerState:t}=e;return t.divider},style:{borderBottom:"1px solid ".concat((t.vars||t).palette.divider),backgroundClip:"padding-box"}},{props:e=>{let{ownerState:t}=e;return!t.dense},style:{[t.breakpoints.up("sm")]:{minHeight:"auto"}}},{props:e=>{let{ownerState:t}=e;return t.dense},style:{minHeight:32,paddingTop:4,paddingBottom:4,...t.typography.body2,["& .".concat(f.Z.root," svg")]:{fontSize:"1.25rem"}}}]}}));var w=a.forwardRef(function(e,t){let n;let i=(0,d.i)({props:e,name:"MuiMenuItem"}),{autoFocus:o=!1,component:s="li",dense:l=!1,divider:c=!1,disableGutters:p=!1,focusVisibleClassName:m,role:f="menuitem",tabIndex:x,className:g,...C}=i,Z=a.useContext(u.Z),j=a.useMemo(()=>({dense:l||Z.dense||!1,disableGutters:p}),[Z.dense,l,p]),w=a.useRef(null);(0,v.Z)(()=>{o&&w.current&&w.current.focus()},[o]);let S={...i,dense:j.dense,divider:c,disableGutters:p},I=k(i),O=(0,h.Z)(w,t);return i.disabled||(n=void 0!==x?x:-1),(0,y.jsx)(u.Z.Provider,{value:j,children:(0,y.jsx)(b,{ref:O,role:f,tabIndex:n,component:s,focusVisibleClassName:(0,r.Z)(I.focusVisible,m),className:(0,r.Z)(I.root,g),...C,ownerState:S,classes:I})})})}},function(e){e.O(0,[1866,6658,7987,422,4100,2560,2371,5616,9303,3974,9937,4138,9695,2971,2117,1744],function(){return e(e.s=50787)}),_N_E=e.O()}]);