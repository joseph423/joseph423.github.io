(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1213],{62802:function(e,t,n){Promise.resolve().then(n.bind(n,2288))},35103:function(e,t,n){"use strict";n.d(t,{I:function(){return u},X:function(){return o}});var r=n(26062),a=n(21099),l=n(31671);let o=async()=>{let e=await l.u.get({key:a.I.SAVED_TAPS});return"string"==typeof(null==e?void 0:e.value)?(0,r.Xe)(e.value):new Map},u=async()=>{let e=await l.u.get({key:a.I.TAP_CHANGE_HISTORIES});return"string"==typeof(null==e?void 0:e.value)?(0,r.Xe)(e.value):new Map}},2288:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return P}});var r=n(57437),a=n(2265),l=n(4689),o=n(69740),u=n(46223),s=n(91991),i=n(31671);function c(e){let{children:t,extraClassName:n="",onClick:a}=e;return(0,r.jsx)(s.Z,{variant:"contained",className:"relative rounded-full p-0 before:float-left before:pb-[100%] before:content-[''] ".concat(n),onClick:a,children:t})}var d=n(38693),f=n(69598),v=n(61848),x=n(84e3),h=n(76695),m=n(12713);function p(e){return(0,r.jsx)(m.Z,{InputLabelProps:{shrink:!0},...e})}var g=n(85860),j=n(22560);function C(e){let{isOpened:t,handleClickReset:n,handleClickCancel:l}=e,[o,u]=(0,a.useState)(""),[i,c]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{!0===t&&u("")},[t]),(0,r.jsxs)(d.Z,{open:t,onClose:l,children:[(0,r.jsx)(h.Z,{children:"Reset Counter"}),(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(x.Z,{children:"You may specify a number, or leave it empty which by default will reset to zero."}),(0,r.jsx)(p,{type:"number",label:"Reset To",placeholder:"0",fullWidth:!0,value:o,onChange:e=>{u(t=>{if(e.target.value.length>10)return t;let n=Number(e.target.value);return""===e.target.value?e.target.value:n})},className:"mt-4"}),(0,r.jsx)(g.Z,{control:(0,r.jsx)(j.Z,{onChange:e=>{c(e.target.checked)},checked:i}),label:"Reset as an unsaved counter"})]}),(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(s.Z,{onClick:l,children:"Cancel"}),(0,r.jsx)(s.Z,{onClick:()=>n(Number(o),i),children:"Reset"})]})]})}var S=n(23996),b=n(69459);function k(e){let{isOpened:t,handleClickSave:n,handleClickCancel:l,loadedSave:o}=e,[u,i]=(0,a.useState)(""),[c,m]=(0,a.useState)(!1);return(0,a.useEffect)(()=>{!0===t&&i(void 0!==o?o.name:"")},[t,o]),(0,r.jsxs)(d.Z,{open:t,onClose:l,children:[(0,r.jsx)(h.Z,{children:"Save Counter"}),(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(x.Z,{children:"To avoid confusion with other saves, an unique name is recommended."}),(0,r.jsx)(p,{label:"Save Name",placeholder:"(Unnamed)",fullWidth:!0,InputProps:{endAdornment:(0,r.jsxs)(S.Z,{position:"end",children:[u.length,"/",50]})},value:u,onChange:e=>{i(t=>e.target.value.length>50?t:e.target.value)},className:"mt-4"}),""!==u&&void 0!==o&&u!==o.name&&!1===c&&(0,r.jsxs)(b.Z,{className:"truncate",children:["Rename as ",(0,r.jsx)("b",{children:u})]}),void 0!==o&&(0,r.jsx)(g.Z,{control:(0,r.jsx)(j.Z,{onChange:e=>{m(e.target.checked)},checked:c}),label:"Save as a new copy"})]}),(0,r.jsxs)(f.Z,{children:[(0,r.jsx)(s.Z,{onClick:l,children:"Cancel"}),(0,r.jsx)(s.Z,{onClick:()=>n(u,c),children:"Save"})]})]})}var w=n(21099),N=n(52801),y=n(26062),_=n(35103),Z=n(59697),A=n(16829),I=n(97244),T=n(83464);let E=e=>{let{tapCount:t}=e;return 0===t?"Tap to Count":1===t?"".concat(t," Tap"):t>1?"".concat(t," Taps"):void 0};function P(){let e=(0,N.t8)(),[t,n]=(0,a.useState)(void 0),[d,f]=(0,a.useState)(0),[v,x]=(0,a.useState)(!1),[h,m]=(0,a.useState)(!1);(0,I.D)({mutationFn:e=>(console.log("mutationFn()",e),T.Z.post("/api/ping",e)),onSuccess:()=>{},onError:()=>{}});let p=async e=>{let t=await (0,_.I)();t.set(e.id,e),t.size>w.QK&&t.delete(Array.from(t.keys())[0]),await i.u.set({key:w.I.TAP_CHANGE_HISTORIES,value:(0,y.w_)(t)})},g=async()=>{if(console.log("handleClickOpenSaveDialog()"),(await (0,_.X)()).size>w.G_){e("You have reached the max tap save count. Please remove some of your saves to continue.");return}x(!0)},j=async(r,a)=>{let l;let o=new Date,u=await (0,_.X)(),s=!1;a||void 0===t||void 0===u.get(t.id)?(l={id:o.getTime().toString(),name:r,tapCount:d,createdAt:o.toISOString()},u.delete(l.id),s=!0):l={...t,name:r,tapCount:d,updatedAt:o.toISOString()},u=new Map([...Array.from(u.entries()),[l.id,l]]),s&&u.size>w.G_&&e("You have reached the max tap save count. Please remove some of your saves to continue.");let c=[i.u.set({key:w.I.SAVED_TAPS,value:(0,y.w_)(u)})];s&&c.push(i.u.set({key:w.I.LOADED_SAVE_ID,value:l.id})),p({id:o.getTime().toString(),tap:l,action:"SAVE",createdAt:o.toISOString()}),Promise.allSettled(c),n(l),x(!1),e("The tap is saved.")};return(0,a.useEffect)(()=>(console.log("Mount page.tsx"),()=>console.log("Unmount page.tsx")),[]),(0,a.useEffect)(()=>{Promise.allSettled([new Promise(async e=>{let t=await i.u.get({key:w.I.LOADED_SAVE_ID});if("string"==typeof(null==t?void 0:t.value)){let e;let r=await i.u.get({key:w.I.SAVED_TAPS});if("string"==typeof r.value&&(e=(0,y.Xe)(r.value)),void 0!==e){let r=e.get(t.value);void 0!==r&&n(r)}}e(!0)}),new Promise(async e=>{let t=await i.u.get({key:w.I.TAP_COUNT});console.log("tap count res",t),"string"==typeof(null==t?void 0:t.value)&&f(Number.parseInt(t.value)),e(!0)})])},[]),(0,r.jsx)(A.default,{heightProfile:"1",paddingProfile:"1",children:(0,r.jsxs)("div",{className:"m-auto flex h-full w-full max-w-2xl flex-1 flex-col justify-center p-4",children:[(0,r.jsxs)("div",{className:"flex w-full justify-between gap-3",children:[(0,r.jsx)(s.Z,{variant:"contained",className:"flex h-fit flex-col justify-start overflow-hidden bg-transparent p-0 shadow-none hover:bg-transparent hover:shadow-none dark:text-neutral-200",onClick:g,children:(0,r.jsxs)("div",{className:"relative rounded-md py-2 pl-3 pr-2 before:absolute before:left-0 before:top-0 before:h-full before:w-1 before:bg-emerald-600 before:content-[''] dark:bg-neutral-800 dark:hover:bg-neutral-700",children:[void 0!==t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(Z.J,{extraClassName:"mx-2 max-w-[150px] truncate px-1 text-xs font-medium normal-case",name:t.name}),(0,r.jsx)("div",{className:"my-1 w-full border-b border-solid dark:border-neutral-200/25"})]}),(0,r.jsxs)("div",{className:"mx-2 flex items-center",children:[(0,r.jsx)(l.Z,{className:"text-xl"}),(0,r.jsx)("span",{className:"ml-1 text-sm normal-case",children:"Click to Save"})]})]})}),(0,r.jsx)(k,{isOpened:v,handleClickSave:j,handleClickCancel:()=>x(!1),loadedSave:t}),(0,r.jsx)(c,{extraClassName:"w-28 dark:bg-red-800 dark:text-white dark:hover:bg-red-700",onClick:()=>m(!0),children:(0,r.jsxs)("div",{children:[(0,r.jsx)(o.Z,{className:"text-2xl"}),(0,r.jsx)("div",{className:"text-base",children:"Reset"})]})}),(0,r.jsx)(C,{isOpened:h,handleClickReset:(r,a)=>{console.log("resetDialogHandleClickReset()",{resetCount:r,shouldResetAsUnsaved:a});let l=new Date,o=void 0===r||isNaN(r)?0:r;i.u.set({key:w.I.TAP_COUNT,value:o.toString()}),p({id:l.getTime().toString(),tap:void 0!==t?t:{tapCount:d},action:"RESET",createdAt:l.toISOString()}),a&&(i.u.remove({key:w.I.LOADED_SAVE_ID}),n(void 0)),f(o),m(!1),e("The tap is reset.")},handleClickCancel:()=>m(!1)})]}),(0,r.jsx)(c,{extraClassName:"-mt-3 w-full dark:bg-amber-500 dark:text-neutral-900 dark:hover:bg-amber-400 dark:focus:bg-amber-400",onClick:()=>{console.log("handleClickTap()"),f(e=>{let t=(e+1).toString().length<=10?e+1:e;return i.u.set({key:w.I.TAP_COUNT,value:t.toString()}),t})},children:(0,r.jsxs)("div",{className:"pt-4",children:[(0,r.jsx)("div",{className:"pb-3 text-4xl",children:(0,r.jsx)(E,{tapCount:d})}),(0,r.jsx)(u.Z,{className:"text-9xl"})]})})]})})}},69598:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(57437),a=n(9026);function l(e){return(0,r.jsx)(a.Z,{...e})}},84e3:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(57437),a=n(12258);function l(e){return(0,r.jsx)(a.Z,{...e})}},61848:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(57437),a=n(77468);function l(e){return(0,r.jsx)(a.Z,{...e})}},76695:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(57437),a=n(79507);function l(e){return(0,r.jsx)(a.Z,{...e})}},38693:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(57437),a=n(53392);function l(e){return(0,r.jsx)(a.Z,{...e})}},16829:function(e,t,n){"use strict";n.d(t,{default:function(){return v}});var r=n(45008),a=n(57437),l=n(74072),o=n(32653),u=n(35301),s=n(26062);function i(){let e=(0,r._)(["min-h-dvh w-full"]);return i=function(){return e},e}function c(){let e=(0,r._)(["h-full"]);return c=function(){return e},e}function d(){let e=(0,r._)(["h-dvh"]);return d=function(){return e},e}function f(){let e=(0,r._)(["p-4 lg:px-6"]);return f=function(){return e},e}function v(e){let{heightProfile:t,paddingProfile:n,children:r}=e,v=(0,o.$o)(),x=(0,l.hB)(),h=(0,s.tw)(i()),m=(0,s.tw)(c());return"1"===t&&(h+=" "+(0,s.tw)(d())),"1"===n||(m+=" "+(0,s.tw)(f())),(0,a.jsx)(u.default,{className:h,style:{paddingTop:null==v?void 0:v.offsetHeight,paddingBottom:null==x?void 0:x.offsetHeight},children:(0,a.jsx)(u.default,{className:m,children:r})})}},59697:function(e,t,n){"use strict";n.d(t,{J:function(){return l}});var r=n(57437),a=n(46387);let l=e=>{let{extraClassName:t,component:n="div",name:l}=e,o=void 0!==l&&""!==l;return(0,r.jsx)(a.default,{component:n,variant:"body1",className:"".concat(o?"dark:text-neutral-200":"dark:text-neutral-200/50"," ").concat(t),children:o?l:"(Unnamed)"})}},74072:function(e,t,n){"use strict";n.d(t,{hB:function(){return s},jp:function(){return i},t9:function(){return u}});var r=n(57437),a=n(2265);let l=(0,a.createContext)(void 0),o=(0,a.createContext)(()=>{}),u=e=>{let{children:t}=e,[n,u]=(0,a.useState)(void 0);return(0,r.jsx)(l.Provider,{value:n,children:(0,r.jsx)(o.Provider,{value:u,children:t})})},s=()=>(0,a.useContext)(l),i=()=>(0,a.useContext)(o)},52801:function(e,t,n){"use strict";n.d(t,{T1:function(){return u},t8:function(){return s}});var r=n(57437),a=n(2265);let l=(0,a.createContext)(null),o=(0,a.createContext)(null),u=e=>{let{children:t,isOpened:n,showNotificationMessage:a}=e;return(0,r.jsx)(l.Provider,{value:n,children:(0,r.jsx)(o.Provider,{value:a,children:t})})},s=()=>(0,a.useContext)(o)},32653:function(e,t,n){"use strict";n.d(t,{$o:function(){return f},dt:function(){return d},s$:function(){return i},tG:function(){return c},w:function(){return v}});var r=n(57437),a=n(2265);let l=(0,a.createContext)(void 0),o=(0,a.createContext)(()=>{}),u=(0,a.createContext)(void 0),s=(0,a.createContext)(()=>{}),i=e=>{let{children:t}=e,[n,i]=(0,a.useState)(!1),[c,d]=(0,a.useState)(void 0);return(0,a.useEffect)(()=>{},[c]),(0,r.jsx)(l.Provider,{value:n,children:(0,r.jsx)(o.Provider,{value:i,children:(0,r.jsx)(u.Provider,{value:c,children:(0,r.jsx)(s.Provider,{value:d,children:t})})})})},c=()=>(0,a.useContext)(l),d=()=>(0,a.useContext)(o),f=()=>(0,a.useContext)(u),v=()=>(0,a.useContext)(s)},26062:function(e,t,n){"use strict";n.d(t,{Xe:function(){return a},oX:function(){return o},tw:function(){return l},w_:function(){return r}});let r=e=>JSON.stringify(Array.from(e)),a=e=>(console.log("jsonToMap()",{json:e}),new Map(JSON.parse(e))),l=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return String.raw({raw:e},...n)},o=(e,t)=>{if(""===e.target.value)return t(""),!0;if("-"===e.target.value)return t("-"),!0;let n=parseInt(e.target.value,10);return!isNaN(n)&&(t(n),!0)}},21099:function(e,t,n){"use strict";n.d(t,{EN:function(){return o},G_:function(){return i},I:function(){return u},QK:function(){return c},ou:function(){return d},pz:function(){return s}});var r=n(45008),a=n(26062);function l(){let e=(0,r._)(["whitespace-pre"]);return l=function(){return e},e}let o={text:"#e5e7eb",background:"#171717",primary:"#f59e0b",secondary:"#10b981",neutral:"#262626",neutral2:"#737373"},u={TAP_COUNT:"tap-count",LOADED_SAVE_ID:"loaded-save-id",SAVED_TAPS:"saved-taps",TAP_CHANGE_HISTORIES:"tap-change-histories"},s=10,i=200,c=1e3,d={htmlInput:{className:{htmlInput:{className:(0,a.tw)(l())}}.htmlInput.className}}}},function(e){e.O(0,[7011,4228,477,5106,2713,2560,6689,4609,4138,3828,3047,2971,2117,1744],function(){return e(e.s=62802)}),_N_E=e.O()}]);